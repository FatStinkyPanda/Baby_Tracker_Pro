/*==============================================================================
 * Baby Tracker Pro - Advanced Stylesheet
 * Version: 2.0
 * 
 * A comprehensive stylesheet with advanced features including:
 * - Dynamic theming with CSS variables
 * - Fluid responsive design
 * - Advanced animations and transitions
 * - Optimized dark mode
 * - Accessibility improvements
 * - Print styles for reports
 *============================================================================*/

/*------------------------------------------------------------------------------
 * TABLE OF CONTENTS:
 * 1. CSS Variables & Custom Properties
 * 2. Reset & Base Styles
 * 3. Typography
 * 4. Layout Containers
 * 5. Header Components
 * 6. Navigation Elements
 * 7. Dashboard Components
 * 8. Forms & Input Controls
 * 9. Cards & Content Containers
 * 10. Buttons & Interactive Elements
 * 11. Trackers & Activity Items
 * 12. Charts & Data Visualization
 * 13. Milestone Components
 * 14. Report Components
 * 15. Modal & Dialog Elements
 * 16. Notifications & Alerts
 * 17. Utilities & Helper Classes
 * 18. Animations & Transitions
 * 19. Media Queries
 * 20. Print Styles
 * 21. Dark Mode Overrides
 *----------------------------------------------------------------------------*/

/*------------------------------------------------------------------------------
 * 1. CSS Variables & Custom Properties
 *----------------------------------------------------------------------------*/
 :root {
    /* Color Palette - Light Theme */
    --primary-hue: 217;
    --primary-color: hsl(var(--primary-hue), 89%, 61%);
    --primary-dark: hsl(var(--primary-hue), 67%, 53%);
    --primary-light: hsl(var(--primary-hue), 92%, 76%);
    --primary-very-light: hsl(var(--primary-hue), 100%, 95%);
    --primary-transparent: hsla(var(--primary-hue), 89%, 61%, 0.1);
    
    --secondary-hue: 137;
    --secondary-color: hsl(var(--secondary-hue), 50%, 43%);
    --secondary-light: hsl(var(--secondary-hue), 38%, 76%);
    --secondary-dark: hsl(var(--secondary-hue), 74%, 28%);
    --secondary-transparent: hsla(var(--secondary-hue), 50%, 43%, 0.1);
    
    --accent-hue: 45;
    --accent-color: hsl(var(--accent-hue), 98%, 50%);
    --accent-light: hsl(var(--accent-hue), 90%, 76%);
    --accent-dark: hsl(var(--accent-hue), 100%, 40%);
    --accent-transparent: hsla(var(--accent-hue), 98%, 50%, 0.1);
    
    --danger-hue: 4;
    --danger-color: hsl(var(--danger-hue), 81%, 56%);
    --danger-light: hsl(var(--danger-hue), 81%, 82%);
    --danger-dark: hsl(var(--danger-hue), 74%, 42%);
    --danger-transparent: hsla(var(--danger-hue), 81%, 56%, 0.1);
    
    --success-color: var(--secondary-color);
    --success-light: var(--secondary-light);
    --warning-color: var(--accent-color);
    --warning-light: var(--accent-light);
    --info-color: var(--primary-color);
    --info-light: var(--primary-light);
    
    /* Neutral Colors */
    --text-color: hsl(220, 9%, 14%);
    --text-secondary: hsl(220, 4%, 38%);
    --text-tertiary: hsl(220, 4%, 50%);
    --text-disabled: hsl(220, 4%, 62%);
    --background-color: hsl(0, 0%, 100%);
    --surface-color: hsl(210, 17%, 98%);
    --surface-high: hsl(0, 0%, 100%);
    --surface-low: hsl(220, 13%, 94%);
    --border-color: hsl(220, 9%, 87%);
    --border-light: hsl(220, 13%, 94%);
    
    /* Elevation and Shadows */
    --shadow-ambient: 0 1px 3px rgba(0, 0, 0, 0.1);
    --shadow-1: 0 1px 2px rgba(0, 0, 0, 0.07), 0 2px 4px rgba(0, 0, 0, 0.07); 
    --shadow-2: 0 2px 4px rgba(0, 0, 0, 0.07), 0 4px 8px rgba(0, 0, 0, 0.07);
    --shadow-3: 0 4px 8px rgba(0, 0, 0, 0.07), 0 8px 16px rgba(0, 0, 0, 0.07);
    --shadow-4: 0 8px 16px rgba(0, 0, 0, 0.07), 0 16px 32px rgba(0, 0, 0, 0.07);
    --shadow-inset: inset 0 2px 4px rgba(0, 0, 0, 0.05);
    
    /* Overlays */
    --hover-overlay: rgba(0, 0, 0, 0.04);
    --active-overlay: rgba(0, 0, 0, 0.08);
    --disabled-overlay: rgba(0, 0, 0, 0.12);
    --modal-overlay: rgba(0, 0, 0, 0.5);
    
    /* Layout & Sizing */
    --border-radius-xs: 4px;
    --border-radius-sm: 8px;
    --border-radius: 12px;
    --border-radius-lg: 16px;
    --border-radius-xl: 24px;
    --border-radius-full: 9999px;
    
    --input-radius: var(--border-radius-sm);
    --button-radius: var(--border-radius-xl);
    --card-radius: var(--border-radius);
    
    --space-unit: 4px;
    --space-2xs: calc(var(--space-unit) * 1);  /* 4px */
    --space-xs: calc(var(--space-unit) * 2);   /* 8px */
    --space-sm: calc(var(--space-unit) * 3);   /* 12px */
    --space-md: calc(var(--space-unit) * 4);   /* 16px */
    --space-lg: calc(var(--space-unit) * 6);   /* 24px */
    --space-xl: calc(var(--space-unit) * 8);   /* 32px */
    --space-2xl: calc(var(--space-unit) * 12); /* 48px */
    --space-3xl: calc(var(--space-unit) * 16); /* 64px */
    
    --header-height: 56px;
    --bottom-nav-height: 72px;
    --tab-height: 56px;
    --floating-button-size: 56px;
    --side-padding: var(--space-md);
    --content-max-width: 1200px;
    
    /* Typography */
    --font-main: 'Nunito', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    --font-headings: 'Montserrat', 'Nunito', sans-serif;
    --font-mono: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
    
    --font-size-2xs: 0.625rem;  /* 10px */
    --font-size-xs: 0.75rem;    /* 12px */
    --font-size-sm: 0.875rem;   /* 14px */
    --font-size-base: 1rem;     /* 16px */
    --font-size-md: 1.125rem;   /* 18px */
    --font-size-lg: 1.25rem;    /* 20px */
    --font-size-xl: 1.5rem;     /* 24px */
    --font-size-2xl: 1.75rem;   /* 28px */
    --font-size-3xl: 2rem;      /* 32px */
    
    --font-weight-light: 300;
    --font-weight-normal: 400;
    --font-weight-medium: 500;
    --font-weight-semibold: 600;
    --font-weight-bold: 700;
    
    --line-height-tight: 1.1;
    --line-height-none: 1;
    --line-height-normal: 1.5;
    --line-height-relaxed: 1.75;
    
    /* Animation & Transitions */
    --transition-speed-fast: 150ms;
    --transition-speed: 250ms;
    --transition-speed-slow: 350ms;
    --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);
    --ease-out: cubic-bezier(0, 0, 0.2, 1);
    --ease-in: cubic-bezier(0.4, 0, 1, 1);
    --ease-bounce: cubic-bezier(0.34, 1.56, 0.64, 1);
    
    /* Z-index layers */
    --z-negative: -1;
    --z-base: 1;
    --z-dropdown: 10;
    --z-tooltip: 20;
    --z-sticky: 50;
    --z-bottom-nav: 100;
    --z-header: 110;
    --z-floating-button: 120;
    --z-overlay: 200;
    --z-modal: 300;
    --z-toast: 400;
    --z-alarming: 500;
    
    /* Focus outline */
    --focus-ring-color: rgba(66, 133, 244, 0.5);
    --focus-ring-width: 3px;
    --focus-ring-offset: 2px;
}

/* Dark theme variables */
[data-theme="dark"] {
    /* Color Adjustments for Dark Theme */
    --primary-color: hsl(var(--primary-hue), 92%, 76%);
    --primary-dark: hsl(var(--primary-hue), 72%, 69%);
    --primary-light: hsl(var(--primary-hue), 95%, 83%);
    --primary-very-light: hsl(var(--primary-hue), 15%, 20%);
    --primary-transparent: hsla(var(--primary-hue), 92%, 76%, 0.1);
    
    --secondary-color: hsl(var(--secondary-hue), 50%, 70%);
    --secondary-light: hsl(var(--secondary-hue), 35%, 45%);
    --secondary-dark: hsl(var(--secondary-hue), 60%, 60%);
    --secondary-transparent: hsla(var(--secondary-hue), 50%, 70%, 0.1);
    
    --accent-color: hsl(var(--accent-hue), 80%, 62%);
    --accent-light: hsl(var(--accent-hue), 70%, 40%);
    --accent-dark: hsl(var(--accent-hue), 90%, 70%);
    --accent-transparent: hsla(var(--accent-hue), 80%, 62%, 0.1);
    
    --danger-color: hsl(var(--danger-hue), 81%, 72%);
    --danger-light: hsl(var(--danger-hue), 61%, 56%);
    --danger-dark: hsl(var(--danger-hue), 90%, 80%);
    --danger-transparent: hsla(var(--danger-hue), 81%, 72%, 0.1);
    
    /* Neutral Colors for Dark Theme */
    --text-color: hsl(210, 17%, 92%);
    --text-secondary: hsl(210, 9%, 70%);
    --text-tertiary: hsl(210, 7%, 60%);
    --text-disabled: hsl(210, 5%, 45%);
    --background-color: hsl(223, 6%, 13%);
    --surface-color: hsl(223, 4%, 16%);
    --surface-high: hsl(223, 4%, 19%);
    --surface-low: hsl(223, 4%, 11%);
    --border-color: hsl(223, 4%, 25%);
    --border-light: hsl(223, 4%, 20%);
    
    /* Elevation and Shadows Adjustments */
    --shadow-ambient: 0 1px 3px rgba(0, 0, 0, 0.25);
    --shadow-1: 0 1px 2px rgba(0, 0, 0, 0.2), 0 2px 4px rgba(0, 0, 0, 0.2);
    --shadow-2: 0 2px 4px rgba(0, 0, 0, 0.2), 0 4px 8px rgba(0, 0, 0, 0.2);
    --shadow-3: 0 4px 8px rgba(0, 0, 0, 0.2), 0 8px 16px rgba(0, 0, 0, 0.2);
    --shadow-4: 0 8px 16px rgba(0, 0, 0, 0.2), 0 16px 32px rgba(0, 0, 0, 0.2);
    --shadow-inset: inset 0 2px 4px rgba(0, 0, 0, 0.15);
    
    /* Overlays for Dark Theme */
    --hover-overlay: rgba(255, 255, 255, 0.05);
    --active-overlay: rgba(255, 255, 255, 0.1);
    --disabled-overlay: rgba(255, 255, 255, 0.05);
    --modal-overlay: rgba(0, 0, 0, 0.7);
    
    /* Focus outline adjustment */
    --focus-ring-color: rgba(138, 180, 248, 0.5);
}

/* High contrast mode support */
@media (prefers-contrast: more) {
    :root {
        --primary-color: hsl(var(--primary-hue), 100%, 40%);
        --border-color: hsl(220, 9%, 20%);
        --focus-ring-color: rgba(0, 0, 0, 0.9);
        --focus-ring-width: 4px;
    }
    
    [data-theme="dark"] {
        --primary-color: hsl(var(--primary-hue), 100%, 70%);
        --border-color: hsl(220, 9%, 70%);
        --focus-ring-color: rgba(255, 255, 255, 0.9);
    }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
    :root {
        --transition-speed-fast: 0ms;
        --transition-speed: 0ms;
        --transition-speed-slow: 0ms;
    }
}

/*------------------------------------------------------------------------------
 * 2. Reset & Base Styles
 *----------------------------------------------------------------------------*/
*, *::before, *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

html {
    font-size: 100%;
    height: 100%;
    scroll-behavior: smooth;
    text-size-adjust: 100%;
    -webkit-text-size-adjust: 100%; 
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

@media (prefers-reduced-motion: reduce) {
    html {
        scroll-behavior: auto;
    }
}

body {
    height: 100%;
    width: 100%;
    overflow-x: hidden;
    font-family: var(--font-main);
    font-size: var(--font-size-base);
    line-height: var(--line-height-normal);
    font-weight: var(--font-weight-normal);
    color: var(--text-color);
    background-color: var(--background-color);
    transition: background-color var(--transition-speed) var(--ease-in-out), 
                color var(--transition-speed) var(--ease-in-out);
    -webkit-tap-highlight-color: transparent;
}

/* Prevent scrolling when modal is open */
body.modal-open {
    overflow: hidden;
}

/* Images */
img {
    max-width: 100%;
    height: auto;
    display: block;
}

/* Lists */
ul, ol {
    list-style: none;
    padding: 0;
    margin: 0;
}

/* Tables */
table {
    width: 100%;
    border-collapse: collapse;
    border-spacing: 0;
}

/* Links */
a {
    color: var(--primary-color);
    text-decoration: none;
    transition: color var(--transition-speed-fast) var(--ease-in-out);
}

a:hover {
    color: var(--primary-dark);
    text-decoration: underline;
}

a:focus-visible {
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    outline-offset: var(--focus-ring-offset);
    border-radius: var(--border-radius-xs);
}

/* Selection */
::selection {
    background-color: var(--primary-transparent);
    color: var(--text-color);
}

/* Scrollbar styles */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: var(--surface-low);
    border-radius: 4px;
}

::-webkit-scrollbar-thumb {
    background: var(--border-color);
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: var(--text-tertiary);
}

/* Focus Styles */
:focus-visible {
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    outline-offset: var(--focus-ring-offset);
}

/*------------------------------------------------------------------------------
 * 3. Typography
 *----------------------------------------------------------------------------*/
h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-headings);
    font-weight: var(--font-weight-semibold);
    line-height: var(--line-height-tight);
    margin-bottom: 0.5em;
    color: var(--text-color);
}

h1 {
    font-size: var(--font-size-3xl);
}

h2 {
    font-size: var(--font-size-2xl);
}

h3 {
    font-size: var(--font-size-xl);
}

h4 {
    font-size: var(--font-size-lg);
}

h5 {
    font-size: var(--font-size-md);
}

h6 {
    font-size: var(--font-size-base);
}

p {
    margin-bottom: 1rem;
}

small, .text-small {
    font-size: var(--font-size-sm);
}

.text-xs {
    font-size: var(--font-size-xs);
}

.text-2xs {
    font-size: var(--font-size-2xs);
}

.text-md {
    font-size: var(--font-size-md);
}

.text-lg {
    font-size: var(--font-size-lg);
}

.text-xl {
    font-size: var(--font-size-xl);
}

.text-2xl {
    font-size: var(--font-size-2xl);
}

.text-3xl {
    font-size: var(--font-size-3xl);
}

.font-light {
    font-weight: var(--font-weight-light);
}

.font-normal {
    font-weight: var(--font-weight-normal);
}

.font-medium {
    font-weight: var(--font-weight-medium);
}

.font-semibold {
    font-weight: var(--font-weight-semibold);
}

.font-bold {
    font-weight: var(--font-weight-bold);
}

.text-primary {
    color: var(--primary-color);
}

.text-secondary {
    color: var(--secondary-color);
}

.text-accent {
    color: var(--accent-color);
}

.text-danger {
    color: var(--danger-color);
}

.text-muted {
    color: var(--text-secondary);
}

.text-center {
    text-align: center;
}

.text-right {
    text-align: right;
}

.text-uppercase {
    text-transform: uppercase;
}

.text-capitalize {
    text-transform: capitalize;
}

.monospace {
    font-family: var(--font-mono);
}

.truncate {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

/*------------------------------------------------------------------------------
 * 4. Layout Containers
 *----------------------------------------------------------------------------*/
#app {
    display: flex;
    flex-direction: column;
    min-height: 100%;
    width: 100%;
    max-width: 100%;
    position: relative;
    overflow-x: hidden;
}

.main-container {
    flex: 1;
    overflow-x: hidden;
    overflow-y: auto;
    position: relative;
    padding-bottom: calc(var(--bottom-nav-height) + var(--space-md));
    will-change: transform; /* Optimize for scroll performance */
    isolation: isolate; /* Create stacking context */
}

.content-area {
    max-width: var(--content-max-width);
    margin: 0 auto;
    padding: var(--space-md) var(--side-padding);
    width: 100%;
}

.tab-content {
    display: none;
    opacity: 0;
    transform: translateY(var(--space-sm));
    transition: opacity var(--transition-speed) var(--ease-out), 
                transform var(--transition-speed) var(--ease-out);
}

.tab-content.active {
    display: block;
    opacity: 1;
    transform: translateY(0);
    animation: fadeSlideIn var(--transition-speed) var(--ease-out);
}

@keyframes fadeSlideIn {
    from {
        opacity: 0;
        transform: translateY(var(--space-sm));
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.section {
    margin-bottom: var(--space-lg);
}

.grid {
    display: grid;
    gap: var(--space-md);
}

.grid-2 {
    grid-template-columns: repeat(2, 1fr);
}

.grid-3 {
    grid-template-columns: repeat(3, 1fr);
}

.grid-4 {
    grid-template-columns: repeat(4, 1fr);
}

.flex {
    display: flex;
}

.flex-col {
    flex-direction: column;
}

.items-center {
    align-items: center;
}

.justify-center {
    justify-content: center;
}

.justify-between {
    justify-content: space-between;
}

.gap-xs {
    gap: var(--space-xs);
}

.gap-sm {
    gap: var(--space-sm);
}

.gap-md {
    gap: var(--space-md);
}

.gap-lg {
    gap: var(--space-lg);
}

.gap-xl {
    gap: var(--space-xl);
}

.spacer {
    flex: 1;
}

/* Container for fixed width content */
.container {
    width: 100%;
    padding-left: var(--side-padding);
    padding-right: var(--side-padding);
    margin-left: auto;
    margin-right: auto;
}

@media (min-width: 640px) {
    .container {
        max-width: 640px;
    }
}

@media (min-width: 768px) {
    .container {
        max-width: 768px;
    }
}

@media (min-width: 1024px) {
    .container {
        max-width: 1024px;
    }
}

@media (min-width: 1280px) {
    .container {
        max-width: 1280px;
    }
}

/*------------------------------------------------------------------------------
 * 5. Header Components
 *----------------------------------------------------------------------------*/
.app-header {
    height: var(--header-height);
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 var(--side-padding);
    background-color: var(--background-color);
    color: var(--text-color);
    border-bottom: 1px solid var(--border-color);
    position: sticky;
    top: 0;
    z-index: var(--z-header);
    width: 100%;
    transition: background-color var(--transition-speed) var(--ease-in-out), 
                color var(--transition-speed) var(--ease-in-out), 
                border-color var(--transition-speed) var(--ease-in-out);
    box-shadow: var(--shadow-ambient);
}

.logo-container {
    display: flex;
    align-items: center;
    gap: var(--space-xs);
}

.logo-container h1 {
    font-family: var(--font-headings);
    font-size: var(--font-size-md);
    font-weight: var(--font-weight-bold);
    margin-bottom: 0;
}

.logo-icon {
    font-size: var(--font-size-xl);
}

.header-actions {
    display: flex;
    align-items: center;
    gap: var(--space-md);
}

.header-button {
    background: transparent;
    border: none;
    border-radius: 50%;
    width: var(--space-xl);
    height: var(--space-xl);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-color);
    cursor: pointer;
    transition: background-color var(--transition-speed-fast) var(--ease-in-out);
    font-size: var(--font-size-lg);
    position: relative;
}

.header-button:hover {
    background-color: var(--hover-overlay);
}

.header-button:active {
    background-color: var(--active-overlay);
}

.header-button:focus-visible {
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    outline-offset: var(--focus-ring-offset);
}

.header-button-badge {
    position: absolute;
    top: 0;
    right: 0;
    width: 16px;
    height: 16px;
    border-radius: 50%;
    background-color: var(--danger-color);
    color: white;
    font-size: var(--font-size-2xs);
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: var(--font-weight-bold);
}

/*------------------------------------------------------------------------------
 * 6. Navigation Elements
 *----------------------------------------------------------------------------*/
.bottom-navigation {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    height: var(--bottom-nav-height);
    background-color: var(--surface-high);
    border-top: 1px solid var(--border-color);
    display: flex;
    justify-content: space-around;
    align-items: center;
    z-index: var(--z-bottom-nav);
    transition: background-color var(--transition-speed) var(--ease-in-out), 
                border-color var(--transition-speed) var(--ease-in-out);
    padding-bottom: env(safe-area-inset-bottom);
    box-shadow: var(--shadow-ambient);
}

.nav-button {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: var(--space-2xs);
    height: 100%;
    background: transparent;
    border: none;
    cursor: pointer;
    color: var(--text-secondary);
    padding: var(--space-xs);
    transition: color var(--transition-speed-fast) var(--ease-in-out), 
                background-color var(--transition-speed-fast) var(--ease-in-out);
    position: relative;
    overflow: hidden;
    user-select: none;
    -webkit-tap-highlight-color: transparent;
}

.nav-button.active {
    color: var(--primary-color);
}

.nav-button:hover {
    background-color: var(--hover-overlay);
}

.nav-button:active {
    background-color: var(--active-overlay);
}

.nav-button:focus-visible {
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    outline-offset: calc(var(--focus-ring-offset) * -1);
}

.nav-button-icon {
    font-size: var(--font-size-xl);
    transition: transform var(--transition-speed-fast) var(--ease-out);
}

.nav-button.active .nav-button-icon {
    transform: scale(1.1);
}

.nav-button-label {
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-semibold);
    transition: transform var(--transition-speed-fast) var(--ease-out), 
                opacity var(--transition-speed-fast) var(--ease-out);
}

/* Nav button indicator/ripple effect */
.nav-button::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 50%;
    width: 0;
    height: 3px;
    background-color: var(--primary-color);
    transition: width var(--transition-speed) var(--ease-out),
                left var(--transition-speed) var(--ease-out);
    border-radius: var(--border-radius-xs) var(--border-radius-xs) 0 0;
}

.nav-button.active::after {
    width: 40%;
    left: 30%;
}

/* Track tabs navigation */
.track-tabs {
    display: flex;
    overflow-x: auto;
    margin-bottom: var(--space-md);
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE and Edge */
    background-color: var(--surface-color);
    border-radius: var(--border-radius);
    padding: var(--space-2xs);
    box-shadow: var(--shadow-ambient);
}

.track-tabs::-webkit-scrollbar {
    display: none; /* Chrome, Safari and Opera */
}

.track-tab {
    flex: 1;
    min-width: 80px;
    padding: var(--space-sm) var(--space-md);
    background: transparent;
    border: none;
    border-radius: var(--input-radius);
    color: var(--text-secondary);
    font-weight: var(--font-weight-semibold);
    cursor: pointer;
    transition: background-color var(--transition-speed-fast) var(--ease-in-out), 
                color var(--transition-speed-fast) var(--ease-in-out);
    white-space: nowrap;
    user-select: none;
}

.track-tab.active {
    background-color: var(--primary-color);
    color: white;
    box-shadow: var(--shadow-1);
}

.track-tab:not(.active):hover {
    background-color: var(--hover-overlay);
}

.track-tab:focus-visible {
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    outline-offset: calc(var(--focus-ring-offset) * -1);
}

/*------------------------------------------------------------------------------
 * 7. Dashboard Components
 *----------------------------------------------------------------------------*/
.dashboard-summary {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: var(--space-md);
    margin-bottom: var(--space-xl);
}

.summary-card {
    background-color: var(--surface-color);
    border-radius: var(--card-radius);
    padding: var(--space-md);
    box-shadow: var(--shadow-1);
    display: flex;
    flex-direction: column;
    position: relative;
    overflow: hidden;
    transition: transform var(--transition-speed-fast) var(--ease-out), 
                box-shadow var(--transition-speed-fast) var(--ease-out);
    backface-visibility: hidden;
}

.summary-card:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-2);
}

.summary-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background-color: var(--primary-color);
    opacity: 0.7;
}

.summary-card#last-feeding-card::before {
    background-color: var(--primary-color);
}

.summary-card#last-diaper-card::before {
    background-color: var(--secondary-color);
}

.summary-card#sleep-card::before {
    background-color: var(--accent-color);
}

.summary-card#age-card::before {
    background-color: var(--danger-color);
}

.card-heading {
    font-family: var(--font-headings);
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    margin-bottom: var(--space-xs);
    display: flex;
    align-items: center;
    gap: var(--space-2xs);
}

.card-icon {
    font-size: var(--font-size-md);
}

.card-value {
    font-size: var(--font-size-xl);
    font-weight: var(--font-weight-bold);
    margin-bottom: var(--space-2xs);
    line-height: var(--line-height-tight);
}

.card-caption {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    line-height: var(--line-height-tight);
}

.time-info {
    color: var(--text-secondary);
    font-size: var(--font-size-xs);
    margin-top: var(--space-2xs);
    line-height: var(--line-height-tight);
}

.dashboard-sections {
    display: flex;
    flex-direction: column;
    gap: var(--space-xl);
}

.dashboard-section {
    background-color: var(--surface-color);
    border-radius: var(--card-radius);
    padding: var(--space-lg);
    box-shadow: var(--shadow-1);
    transition: box-shadow var(--transition-speed-fast) var(--ease-out);
}

.dashboard-section:hover {
    box-shadow: var(--shadow-2);
}

.section-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: var(--space-md);
}

.section-title {
    font-family: var(--font-headings);
    font-size: var(--font-size-md);
    font-weight: var(--font-weight-semibold);
    margin-bottom: 0;
}

.section-actions {
    display: flex;
    gap: var(--space-xs);
}

.btn-section {
    background-color: transparent;
    border: none;
    color: var(--primary-color);
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-semibold);
    cursor: pointer;
    padding: var(--space-2xs) var(--space-sm);
    border-radius: var(--border-radius-xl);
    transition: background-color var(--transition-speed-fast) var(--ease-in-out);
}

.btn-section:hover {
    background-color: var(--primary-very-light);
}

.btn-section:focus-visible {
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    outline-offset: var(--focus-ring-offset);
}

.upcoming-items {
    display: flex;
    flex-direction: column;
    gap: var(--space-sm);
}

.upcoming-item {
    display: flex;
    align-items: center;
    padding: var(--space-sm);
    background-color: var(--background-color);
    border-radius: var(--input-radius);
    transition: transform var(--transition-speed-fast) var(--ease-out),
                box-shadow var(--transition-speed-fast) var(--ease-out);
    position: relative;
    overflow: hidden;
}

.upcoming-item:hover {
    transform: translateX(var(--space-2xs));
    box-shadow: var(--shadow-1);
}

.upcoming-item::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 3px;
    background-color: var(--primary-color);
    border-radius: 4px 0 0 4px;
}

.upcoming-item.feeding::before {
    background-color: var(--primary-color);
}

.upcoming-item.diaper::before {
    background-color: var(--secondary-color);
}

.upcoming-item.sleep::before {
    background-color: var(--accent-color);
}

.upcoming-icon {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background-color: var(--primary-very-light);
    color: var(--primary-color);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--font-size-lg);
    margin-right: var(--space-sm);
    flex-shrink: 0;
}

.upcoming-icon.feeding {
    background-color: var(--primary-very-light);
    color: var(--primary-color);
}

.upcoming-icon.diaper {
    background-color: var(--secondary-transparent);
    color: var(--secondary-color);
}

.upcoming-icon.sleep {
    background-color: var(--accent-transparent);
    color: var(--accent-color);
}

.upcoming-details {
    flex: 1;
}

.upcoming-title {
    font-weight: var(--font-weight-semibold);
    margin-bottom: 2px;
}

.upcoming-time {
    color: var(--text-secondary);
    font-size: var(--font-size-sm);
}

.upcoming-confidence {
    font-size: var(--font-size-xs);
    padding: 2px 8px;
    border-radius: 12px;
    margin-left: var(--space-xs);
    font-weight: var(--font-weight-medium);
}

.confidence-high {
    background-color: var(--secondary-light);
    color: var(--background-color);
}

.confidence-medium {
    background-color: var(--accent-light);
    color: var(--text-color);
}

.confidence-low {
    background-color: var(--danger-light);
    color: var(--background-color);
}

.recent-activities {
    display: flex;
    flex-direction: column;
    gap: var(--space-xs);
}

.activity-item {
    display: flex;
    align-items: center;
    padding: var(--space-sm);
    border-radius: var(--input-radius);
    background-color: var(--background-color);
    transition: transform var(--transition-speed-fast) var(--ease-out),
                box-shadow var(--transition-speed-fast) var(--ease-out);
    position: relative;
}

.activity-item:hover {
    transform: translateX(var(--space-2xs));
    box-shadow: var(--shadow-1);
}

.activity-icon {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background-color: var(--primary-very-light);
    color: var(--primary-color);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--font-size-md);
    margin-right: var(--space-sm);
    flex-shrink: 0;
}

.activity-icon.feeding {
    background-color: var(--primary-very-light);
    color: var(--primary-color);
}

.activity-icon.diaper {
    background-color: var(--secondary-transparent);
    color: var(--secondary-color);
}

.activity-icon.sleep {
    background-color: var(--accent-transparent);
    color: var(--accent-color);
}

.activity-icon.growth {
    background-color: var(--danger-transparent);
    color: var(--danger-color);
}

.activity-icon.health {
    background-color: var(--info-light);
    color: var(--info-color);
}

.activity-details {
    flex: 1;
}

.activity-title {
    font-weight: var(--font-weight-semibold);
    font-size: var(--font-size-sm);
}

.activity-time {
    color: var(--text-secondary);
    font-size: var(--font-size-xs);
    margin-top: 2px;
}

.activity-meta {
    font-size: var(--font-size-xs);
    color: var(--text-secondary);
    margin-top: 2px;
}

.chart-container {
    margin-top: var(--space-md);
    height: 200px;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: var(--background-color);
    border-radius: var(--input-radius);
    padding: var(--space-md);
}

.no-data-message {
    text-align: center;
    color: var(--text-secondary);
    padding: var(--space-lg);
    font-size: var(--font-size-sm);
}

.no-data-message:empty {
    display: none;
}

/*------------------------------------------------------------------------------
 * 8. Forms & Input Controls
 *----------------------------------------------------------------------------*/
.track-form-container {
    background-color: var(--surface-color);
    border-radius: var(--card-radius);
    padding: var(--space-lg);
    margin-bottom: var(--space-xl);
    box-shadow: var(--shadow-1);
}

.form-title {
    font-family: var(--font-headings);
    font-size: var(--font-size-md);
    margin-bottom: var(--space-md);
    font-weight: var(--font-weight-semibold);
}

.form-group {
    margin-bottom: var(--space-md);
}

.form-label {
    display: block;
    margin-bottom: var(--space-xs);
    font-weight: var(--font-weight-semibold);
}

.form-hint {
    font-size: var(--font-size-xs);
    color: var(--text-secondary);
    margin-top: var(--space-2xs);
}

.track-form {
    display: none;
    animation: fadeIn var(--transition-speed) var(--ease-out);
}

.track-form.active {
    display: block;
}

@keyframes fadeIn {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

.form-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: var(--space-sm);
}

.input-field {
    width: 100%;
    padding: var(--space-sm) var(--space-md);
    border: 1px solid var(--border-color);
    border-radius: var(--input-radius);
    font-family: var(--font-main);
    font-size: var(--font-size-base);
    background-color: var(--background-color);
    color: var(--text-color);
    transition: border-color var(--transition-speed-fast) var(--ease-in-out), 
                box-shadow var(--transition-speed-fast) var(--ease-in-out),
                background-color var(--transition-speed-fast) var(--ease-in-out);
}

.input-field:hover {
    border-color: var(--primary-light);
}

.input-field:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 2px var(--primary-transparent);
}

.input-field:disabled,
.input-field[readonly] {
    background-color: var(--surface-low);
    cursor: not-allowed;
    opacity: 0.7;
}

.input-field::placeholder {
    color: var(--text-tertiary);
}

textarea.input-field {
    resize: vertical;
    min-height: 80px;
}

.checkbox-container {
    display: flex;
    gap: var(--space-xs);
    align-items: center;
    margin-top: var(--space-xs);
}

.checkbox-container label {
    cursor: pointer;
}

/* Custom checkbox */
.checkbox-container input[type="checkbox"] {
    -webkit-appearance: none;
    appearance: none;
    width: 20px;
    height: 20px;
    border: 1px solid var(--border-color);
    border-radius: 4px;
    background-color: var(--background-color);
    display: grid;
    place-content: center;
    transition: background-color var(--transition-speed-fast) var(--ease-in-out), 
                border-color var(--transition-speed-fast) var(--ease-in-out);
    cursor: pointer;
}

.checkbox-container input[type="checkbox"]::before {
    content: "";
    width: 12px;
    height: 12px;
    transform: scale(0);
    transition: transform var(--transition-speed-fast) var(--ease-bounce);
    box-shadow: inset 1em 1em var(--primary-color);
    transform-origin: center;
    clip-path: polygon(14% 44%, 0 65%, 50% 100%, 100% 16%, 80% 0%, 43% 62%);
}

.checkbox-container input[type="checkbox"]:checked {
    background-color: var(--primary-transparent);
    border-color: var(--primary-color);
}

.checkbox-container input[type="checkbox"]:checked::before {
    transform: scale(1);
}

.checkbox-container input[type="checkbox"]:focus-visible {
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    outline-offset: var(--focus-ring-offset);
}

select.input-field {
    appearance: none;
    background-image: url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%235f6368' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right var(--space-md) center;
    padding-right: var(--space-2xl);
}

[data-theme="dark"] select.input-field {
    background-image: url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%239aa0a6' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
}

.toggle-group {
    display: flex;
    background-color: var(--background-color);
    border-radius: var(--input-radius);
    border: 1px solid var(--border-color);
    overflow: hidden;
}

.toggle-option {
    flex: 1;
    background: transparent;
    border: none;
    padding: var(--space-sm);
    cursor: pointer;
    font-family: var(--font-main);
    font-weight: var(--font-weight-semibold);
    color: var(--text-secondary);
    transition: background-color var(--transition-speed-fast) var(--ease-in-out), 
                color var(--transition-speed-fast) var(--ease-in-out);
    position: relative;
}

.toggle-option:not(:last-child):after {
    content: '';
    position: absolute;
    right: 0;
    top: var(--space-sm);
    bottom: var(--space-sm);
    width: 1px;
    background-color: var(--border-color);
}

.toggle-option.selected {
    background-color: var(--primary-color);
    color: white;
}

.toggle-option:not(.selected):hover {
    background-color: var(--hover-overlay);
}

.toggle-option:focus-visible {
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    outline-offset: calc(var(--focus-ring-offset) * -1);
    z-index: 1;
}

.btn-submit-container {
    margin-top: var(--space-lg);
    display: flex;
    justify-content: flex-end;
}

.btn-submit {
    background-color: var(--primary-color);
    color: white;
    border: none;
    border-radius: var(--button-radius);
    padding: var(--space-sm) var(--space-xl);
    font-family: var(--font-main);
    font-weight: var(--font-weight-semibold);
    font-size: var(--font-size-base);
    cursor: pointer;
    transition: background-color var(--transition-speed-fast) var(--ease-in-out), 
                transform var(--transition-speed-fast) var(--ease-in-out),
                box-shadow var(--transition-speed-fast) var(--ease-in-out);
    box-shadow: var(--shadow-1);
}

.btn-submit:hover {
    background-color: var(--primary-dark);
    box-shadow: var(--shadow-2);
}

.btn-submit:active {
    transform: scale(0.98);
}

.btn-submit:focus-visible {
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    outline-offset: var(--focus-ring-offset);
}

/* Custom range input styling */
input[type="range"] {
    -webkit-appearance: none;
    appearance: none;
    width: 100%;
    height: 6px;
    background: var(--surface-low);
    border-radius: var(--border-radius-full);
    outline: none;
    transition: background-color var(--transition-speed-fast) var(--ease-in-out);
}

input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: var(--primary-color);
    cursor: pointer;
    transition: transform var(--transition-speed-fast) var(--ease-out),
                background-color var(--transition-speed-fast) var(--ease-in-out);
}

input[type="range"]::-moz-range-thumb {
    width: 20px;
    height: 20px;
    border: none;
    border-radius: 50%;
    background: var(--primary-color);
    cursor: pointer;
    transition: transform var(--transition-speed-fast) var(--ease-out),
                background-color var(--transition-speed-fast) var(--ease-in-out);
}

input[type="range"]:hover::-webkit-slider-thumb {
    transform: scale(1.1);
}

input[type="range"]:hover::-moz-range-thumb {
    transform: scale(1.1);
}

input[type="range"]:focus-visible {
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    outline-offset: var(--focus-ring-offset);
}

/*------------------------------------------------------------------------------
 * 9. Cards & Content Containers
 *----------------------------------------------------------------------------*/
.card {
    background-color: var(--surface-color);
    border-radius: var(--card-radius);
    padding: var(--space-lg);
    box-shadow: var(--shadow-1);
    transition: box-shadow var(--transition-speed-fast) var(--ease-out),
                transform var(--transition-speed-fast) var(--ease-out);
}

.card:hover {
    box-shadow: var(--shadow-2);
}

.card-interactive {
    cursor: pointer;
}

.card-interactive:hover {
    transform: translateY(-2px);
}

.card-header {
    margin-bottom: var(--space-md);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.card-title {
    font-family: var(--font-headings);
    font-size: var(--font-size-md);
    font-weight: var(--font-weight-semibold);
    margin-bottom: 0;
}

.card-body {
    margin-bottom: var(--space-md);
}

.card-footer {
    border-top: 1px solid var(--border-light);
    padding-top: var(--space-md);
    display: flex;
    justify-content: flex-end;
    gap: var(--space-sm);
}

.recent-tracking {
    margin-top: var(--space-xl);
}

.tracked-items {
    display: flex;
    flex-direction: column;
    gap: var(--space-md);
}

.tracked-item {
    background-color: var(--surface-color);
    border-radius: var(--card-radius);
    padding: var(--space-md);
    box-shadow: var(--shadow-1);
    position: relative;
    transition: box-shadow var(--transition-speed-fast) var(--ease-out);
}

.tracked-item:hover {
    box-shadow: var(--shadow-2);
}

.tracked-item::before {
    content: '';
    position: absolute;
    left: 0;
    top: var(--space-md);
    bottom: var(--space-md);
    width: 3px;
    background-color: var(--primary-color);
    border-radius: 0 2px 2px 0;
}

.tracked-item.feeding::before {
    background-color: var(--primary-color);
}

.tracked-item.diaper::before {
    background-color: var(--secondary-color);
}

.tracked-item.sleep::before {
    background-color: var(--accent-color);
}

.tracked-item.growth::before {
    background-color: var(--danger-color);
}

.tracked-item.health::before {
    background-color: var(--info-color);
}

.tracked-item-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: var(--space-xs);
}

.tracked-title {
    font-weight: var(--font-weight-bold);
}

.tracked-time {
    color: var(--text-secondary);
    font-size: var(--font-size-sm);
}

.tracked-details {
    color: var(--text-color);
    font-size: var(--font-size-base);
}

.tracked-meta {
    margin-top: var(--space-xs);
    color: var(--text-secondary);
    font-size: var(--font-size-sm);
    line-height: var(--line-height-tight);
}

.tracked-actions {
    display: flex;
    justify-content: flex-end;
    margin-top: var(--space-sm);
    gap: var(--space-xs);
}

.btn-tracked {
    background-color: transparent;
    border: none;
    color: var(--primary-color);
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-semibold);
    cursor: pointer;
    padding: var(--space-2xs) var(--space-sm);
    border-radius: var(--border-radius-xl);
    transition: background-color var(--transition-speed-fast) var(--ease-in-out),
                color var(--transition-speed-fast) var(--ease-in-out);
}

.btn-tracked:hover {
    background-color: var(--primary-very-light);
}

.btn-tracked:focus-visible {
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    outline-offset: var(--focus-ring-offset);
}

.btn-tracked.btn-delete {
    color: var(--danger-color);
}

.btn-tracked.btn-delete:hover {
    background-color: var(--danger-light);
    color: white;
}

/*------------------------------------------------------------------------------
 * 10. Buttons & Interactive Elements
 *----------------------------------------------------------------------------*/
.btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: var(--space-sm) var(--space-md);
    background-color: var(--primary-color);
    color: white;
    border: none;
    border-radius: var(--button-radius);
    font-weight: var(--font-weight-semibold);
    cursor: pointer;
    transition: background-color var(--transition-speed-fast) var(--ease-in-out),
                transform var(--transition-speed-fast) var(--ease-in-out),
                box-shadow var(--transition-speed-fast) var(--ease-in-out);
    box-shadow: var(--shadow-1);
    font-family: var(--font-main);
    font-size: var(--font-size-base);
    line-height: var(--line-height-normal);
    white-space: nowrap;
    gap: var(--space-xs);
    user-select: none;
}

.btn:hover {
    background-color: var(--primary-dark);
    box-shadow: var(--shadow-2);
}

.btn:active {
    transform: scale(0.98);
}

.btn:focus-visible {
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    outline-offset: var(--focus-ring-offset);
}

.btn-secondary {
    background-color: var(--surface-color);
    color: var(--text-color);
    border: 1px solid var(--border-color);
}

.btn-secondary:hover {
    background-color: var(--hover-overlay);
    box-shadow: var(--shadow-1);
}

.btn-accent {
    background-color: var(--accent-color);
    color: var(--text-color);
}

.btn-accent:hover {
    background-color: var(--accent-dark);
}

.btn-danger {
    background-color: var(--danger-color);
}

.btn-danger:hover {
    background-color: var(--danger-dark);
}

.btn-sm {
    padding: var(--space-2xs) var(--space-sm);
    font-size: var(--font-size-sm);
}

.btn-lg {
    padding: var(--space-md) var(--space-xl);
    font-size: var(--font-size-md);
}

.btn:disabled,
.btn.disabled {
    opacity: 0.6;
    cursor: not-allowed;
    pointer-events: none;
}

.btn-icon {
    width: 40px;
    height: 40px;
    padding: 0;
    border-radius: 50%;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: var(--font-size-lg);
}

.btn-icon-sm {
    width: 32px;
    height: 32px;
    font-size: var(--font-size-base);
}

.btn-icon-lg {
    width: 48px;
    height: 48px;
    font-size: var(--font-size-xl);
}

.btn-export {
    background-color: var(--accent-color);
    color: var(--text-color);
    border: none;
    border-radius: var(--button-radius);
    padding: var(--space-sm) var(--space-md);
    font-weight: var(--font-weight-semibold);
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: var(--space-xs);
    transition: background-color var(--transition-speed-fast) var(--ease-in-out),
                transform var(--transition-speed-fast) var(--ease-in-out),
                box-shadow var(--transition-speed-fast) var(--ease-in-out);
    margin-top: var(--space-lg);
    box-shadow: var(--shadow-1);
}

.btn-export:hover {
    background-color: var(--accent-light);
    box-shadow: var(--shadow-2);
}

.btn-export:active {
    transform: scale(0.98);
}

.btn-export:focus-visible {
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    outline-offset: var(--focus-ring-offset);
}

/* Floating action button */
.floating-button {
    position: fixed;
    bottom: calc(var(--bottom-nav-height) + var(--space-md));
    right: var(--space-md);
    width: var(--floating-button-size);
    height: var(--floating-button-size);
    border-radius: 50%;
    background-color: var(--primary-color);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: var(--shadow-3);
    cursor: pointer;
    z-index: var(--z-floating-button);
    transition: background-color var(--transition-speed-fast) var(--ease-in-out), 
                transform var(--transition-speed-fast) var(--ease-out),
                box-shadow var(--transition-speed-fast) var(--ease-out);
    font-size: var(--font-size-xl);
}

.floating-button:hover {
    background-color: var(--primary-dark);
    transform: scale(1.05);
    box-shadow: var(--shadow-4);
}

.floating-button:active {
    transform: scale(0.95);
}

.floating-button:focus-visible {
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    outline-offset: var(--focus-ring-offset);
}

/* Theme toggle */
.theme-toggle {
    background-color: var(--surface-color);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-full);
    width: 64px;
    height: 32px;
    padding: 4px;
    position: relative;
    cursor: pointer;
    transition: background-color var(--transition-speed) var(--ease-in-out);
}

.theme-toggle-slider {
    position: absolute;
    left: 4px;
    top: 4px;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    background-color: var(--primary-color);
    transition: transform var(--transition-speed) var(--ease-in-out), 
                background-color var(--transition-speed) var(--ease-in-out);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: var(--font-size-sm);
    box-shadow: var(--shadow-1);
}

.theme-toggle[data-theme="dark"] .theme-toggle-slider {
    transform: translateX(32px);
    background-color: var(--primary-color);
}

.theme-toggle:focus-visible {
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    outline-offset: var(--focus-ring-offset);
}

/*------------------------------------------------------------------------------
 * 11. Trackers & Activity Items
 *----------------------------------------------------------------------------*/
.sleep-timer {
    display: none;
    position: fixed;
    bottom: var(--bottom-nav-height);
    left: 0;
    right: 0;
    background-color: var(--primary-color);
    color: white;
    padding: var(--space-md);
    z-index: var(--z-sticky);
    box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
    animation: slideUpIn var(--transition-speed) var(--ease-out);
}

@keyframes slideUpIn {
    from {
        transform: translateY(100%);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

.sleep-timer.active {
    display: block;
}

.sleep-timer-content {
    display: flex;
    align-items: center;
    justify-content: space-between;
    max-width: var(--content-max-width);
    margin: 0 auto;
}

.sleep-time {
    font-size: var(--font-size-xl);
    font-weight: var(--font-weight-bold);
    font-family: var(--font-mono);
}

.sleep-status {
    font-size: var(--font-size-sm);
    margin-top: 2px;
}

.sleep-actions {
    display: flex;
    gap: var(--space-sm);
}

.sleep-btn {
    background-color: white;
    color: var(--primary-color);
    border: none;
    border-radius: var(--button-radius);
    padding: var(--space-xs) var(--space-md);
    font-weight: var(--font-weight-semibold);
    cursor: pointer;
    transition: background-color var(--transition-speed-fast) var(--ease-in-out), 
                transform var(--transition-speed-fast) var(--ease-in-out);
}

.sleep-btn:hover {
    background-color: var(--primary-very-light);
}

.sleep-btn:active {
    transform: scale(0.98);
}

.sleep-btn:focus-visible {
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    outline-offset: var(--focus-ring-offset);
}

/* Milestone styles */
.milestone-filters {
    background-color: var(--surface-color);
    border-radius: var(--card-radius);
    padding: var(--space-md);
    margin-bottom: var(--space-xl);
    box-shadow: var(--shadow-1);
}

.milestone-info {
    padding: var(--space-md);
    background-color: var(--primary-very-light);
    color: var(--text-color);
    border-radius: var(--input-radius);
    margin-bottom: var(--space-lg);
}

.milestone-list {
    list-style: none;
}

.milestone-age-group {
    margin-bottom: var(--space-xl);
}

.milestone-age-group h4 {
    font-family: var(--font-headings);
    margin-bottom: var(--space-sm);
    padding-bottom: var(--space-xs);
    border-bottom: 1px solid var(--border-color);
}

.milestone-age-group ul {
    list-style: none;
    display: flex;
    flex-direction: column;
    gap: var(--space-sm);
}

.milestone {
    display: flex;
    align-items: center;
    background-color: var(--surface-color);
    border-radius: var(--input-radius);
    padding: var(--space-sm);
    transition: transform var(--transition-speed-fast) var(--ease-out),
                box-shadow var(--transition-speed-fast) var(--ease-out);
    box-shadow: var(--shadow-1);
}

.milestone:hover {
    transform: translateX(var(--space-2xs));
    box-shadow: var(--shadow-2);
}

.milestone.completed {
    background-color: var(--secondary-light);
    color: white;
}

.milestone-dot, .milestone-check {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: var(--space-sm);
    flex-shrink: 0;
}

.milestone-dot {
    background-color: var(--primary-very-light);
    border: 2px solid var(--primary-color);
}

.milestone-check {
    background-color: var(--accent-color);
    color: white;
    font-size: var(--font-size-sm);
}

.milestone-details {
    flex: 1;
}

.milestone-details span {
    display: block;
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    margin-top: 2px;
}

.completed .milestone-details span {
    color: rgba(255, 255, 255, 0.8);
}

.mark-complete {
    background-color: var(--primary-color);
    color: white;
    border: none;
    border-radius: var(--border-radius-xl);
    padding: var(--space-2xs) var(--space-sm);
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-semibold);
    cursor: pointer;
    transition: background-color var(--transition-speed-fast) var(--ease-in-out),
                transform var(--transition-speed-fast) var(--ease-in-out);
}

.mark-complete:hover {
    background-color: var(--primary-dark);
}

.mark-complete:active {
    transform: scale(0.98);
}

.mark-complete:focus-visible {
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    outline-offset: var(--focus-ring-offset);
}

.no-milestones {
    padding: var(--space-lg);
    text-align: center;
    color: var(--text-secondary);
}

/*------------------------------------------------------------------------------
 * 12. Charts & Data Visualization
 *----------------------------------------------------------------------------*/
.chart-container {
    position: relative;
    margin-top: var(--space-md);
    height: 200px;
    width: 100%;
    background-color: var(--background-color);
    border-radius: var(--input-radius);
    overflow: hidden;
}

.chart-legend {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-sm);
    margin-top: var(--space-sm);
    justify-content: center;
}

.legend-item {
    display: flex;
    align-items: center;
    gap: var(--space-2xs);
    font-size: var(--font-size-sm);
}

.legend-color {
    width: 12px;
    height: 12px;
    border-radius: 2px;
}

.stat-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    gap: var(--space-md);
    margin-bottom: var(--space-lg);
}

.stat-card {
    background-color: var(--surface-color);
    border-radius: var(--card-radius);
    padding: var(--space-md);
    text-align: center;
    box-shadow: var(--shadow-1);
    transition: transform var(--transition-speed-fast) var(--ease-out),
                box-shadow var(--transition-speed-fast) var(--ease-out);
}

.stat-card:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-2);
}

.stat-value {
    font-size: var(--font-size-xl);
    font-weight: var(--font-weight-bold);
    color: var(--primary-color);
}

.stat-label {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    margin-top: var(--space-2xs);
}

.report-filters {
    background-color: var(--surface-color);
    border-radius: var(--card-radius);
    padding: var(--space-md);
    margin-bottom: var(--space-xl);
    box-shadow: var(--shadow-1);
}

.filter-row {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-sm);
    align-items: center;
}

.filter-group {
    flex: 1;
    min-width: 140px;
}

.filter-label {
    font-weight: var(--font-weight-semibold);
    margin-bottom: var(--space-xs);
    display: block;
}

.report-section {
    background-color: var(--surface-color);
    border-radius: var(--card-radius);
    padding: var(--space-lg);
    margin-bottom: var(--space-xl);
    box-shadow: var(--shadow-1);
}

.report-title {
    font-family: var(--font-headings);
    font-size: var(--font-size-md);
    font-weight: var(--font-weight-semibold);
    margin-bottom: var(--space-md);
}

.report-stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    gap: var(--space-md);
    margin-bottom: var(--space-lg);
}

.stat-item {
    background-color: var(--background-color);
    border-radius: var(--input-radius);
    padding: var(--space-md);
    text-align: center;
    transition: transform var(--transition-speed-fast) var(--ease-out),
                box-shadow var(--transition-speed-fast) var(--ease-out);
}

.stat-item:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-1);
}

/*------------------------------------------------------------------------------
 * 13. Milestone Components 
 *----------------------------------------------------------------------------*/
/* Additional milestone styles are in section 11 */

.milestone-progress {
    margin-bottom: var(--space-lg);
}

.progress-container {
    width: 100%;
    height: 8px;
    background-color: var(--surface-low);
    border-radius: var(--border-radius-full);
    overflow: hidden;
    margin-bottom: var(--space-sm);
}

.progress-bar {
    height: 100%;
    background-color: var(--primary-color);
    border-radius: var(--border-radius-full);
    transition: width 0.5s var(--ease-out);
}

.progress-stats {
    display: flex;
    justify-content: space-between;
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
}

.milestone-category-tabs {
    display: flex;
    overflow-x: auto;
    margin-bottom: var(--space-md);
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
    gap: var(--space-2xs);
}

.milestone-category-tabs::-webkit-scrollbar {
    display: none;
}

.milestone-category-tab {
    padding: var(--space-xs) var(--space-sm);
    background: transparent;
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-xl);
    color: var(--text-secondary);
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-semibold);
    cursor: pointer;
    transition: background-color var(--transition-speed-fast) var(--ease-in-out),
                color var(--transition-speed-fast) var(--ease-in-out),
                border-color var(--transition-speed-fast) var(--ease-in-out);
    white-space: nowrap;
}

.milestone-category-tab.active {
    background-color: var(--primary-color);
    color: white;
    border-color: var(--primary-color);
}

.milestone-category-tab:not(.active):hover {
    background-color: var(--hover-overlay);
}

.milestone-category-tab:focus-visible {
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    outline-offset: var(--focus-ring-offset);
}

/*------------------------------------------------------------------------------
 * 14. Report Components
 *----------------------------------------------------------------------------*/
/* Additional report styles are in section 12 */

.summary-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

.summary-list li {
    padding: var(--space-sm);
    border-bottom: 1px solid var(--border-light);
    display: flex;
    align-items: center;
    gap: var(--space-sm);
}

.summary-list li:last-child {
    border-bottom: none;
}

.summary-icon {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background-color: var(--primary-very-light);
    color: var(--primary-color);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.summary-content {
    flex: 1;
}

.pattern-group {
    margin-bottom: var(--space-lg);
}

.pattern-group:last-child {
    margin-bottom: 0;
}

.pattern-group h5 {
    font-family: var(--font-headings);
    margin-bottom: var(--space-sm);
    color: var(--primary-color);
}

.pattern-item {
    padding: var(--space-sm);
    background-color: var(--background-color);
    border-radius: var(--input-radius);
    margin-bottom: var(--space-xs);
}

.pattern-item:last-child {
    margin-bottom: 0;
}

/*------------------------------------------------------------------------------
 * 15. Modal & Dialog Elements
 *----------------------------------------------------------------------------*/
.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: var(--modal-overlay);
    z-index: var(--z-modal);
    align-items: flex-end;
    justify-content: center;
    padding: var(--space-md);
    overflow-y: auto;
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
}

.modal.centered {
    align-items: center;
}

.modal-content {
    background-color: var(--background-color);
    border-radius: var(--card-radius) var(--card-radius) 0 0;
    width: 100%;
    max-width: 500px;
    max-height: 80vh;
    overflow-y: auto;
    animation: slideUp var(--transition-speed) var(--ease-out);
    position: relative;
    box-shadow: var(--shadow-3);
}

.centered .modal-content {
    border-radius: var(--card-radius);
}

@keyframes slideUp {
    from {
        transform: translateY(100%);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

.modal-header {
    padding: var(--space-md) var(--space-lg);
    border-bottom: 1px solid var(--border-color);
    display: flex;
    align-items: center;
    justify-content: space-between;
    position: sticky;
    top: 0;
    background-color: var(--background-color);
    z-index: 1;
}

.modal-title {
    font-family: var(--font-headings);
    font-size: var(--font-size-md);
    font-weight: var(--font-weight-semibold);
    margin-bottom: 0;
}

.modal-close {
    background: transparent;
    border: none;
    cursor: pointer;
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-secondary);
    font-size: var(--font-size-lg);
    border-radius: 50%;
    transition: background-color var(--transition-speed-fast) var(--ease-in-out),
                color var(--transition-speed-fast) var(--ease-in-out);
}

.modal-close:hover {
    background-color: var(--hover-overlay);
    color: var(--text-color);
}

.modal-close:focus-visible {
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    outline-offset: var(--focus-ring-offset);
}

.modal-body {
    padding: var(--space-lg);
}

.modal-actions {
    padding: var(--space-md) var(--space-lg);
    border-top: 1px solid var(--border-color);
    display: flex;
    justify-content: flex-end;
    gap: var(--space-md);
    position: sticky;
    bottom: 0;
    background-color: var(--background-color);
}

.modal-btn {
    padding: var(--space-sm) var(--space-lg);
    border-radius: var(--button-radius);
    font-weight: var(--font-weight-semibold);
    cursor: pointer;
    transition: background-color var(--transition-speed-fast) var(--ease-in-out),
                transform var(--transition-speed-fast) var(--ease-in-out);
}

.modal-btn-secondary {
    background-color: transparent;
    border: 1px solid var(--border-color);
    color: var(--text-color);
}

.modal-btn-secondary:hover {
    background-color: var(--hover-overlay);
}

.modal-btn-primary {
    background-color: var(--primary-color);
    color: white;
    border: none;
}

.modal-btn-primary:hover {
    background-color: var(--primary-dark);
}

.modal-btn:active {
    transform: scale(0.98);
}

.modal-btn:focus-visible {
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    outline-offset: var(--focus-ring-offset);
}

/*------------------------------------------------------------------------------
 * 16. Notifications & Alerts
 *----------------------------------------------------------------------------*/
.toast-container {
    position: fixed;
    top: var(--space-md);
    right: var(--space-md);
    z-index: var(--z-toast);
    display: flex;
    flex-direction: column;
    gap: var(--space-xs);
    max-width: 300px;
    pointer-events: none;
}

.toast {
    background-color: var(--surface-high);
    border-left: 4px solid var(--primary-color);
    border-radius: var(--input-radius);
    padding: var(--space-md);
    box-shadow: var(--shadow-2);
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    animation: slideIn var(--transition-speed) var(--ease-out), 
               fadeOut var(--transition-speed) var(--ease-in) 2.7s;
    opacity: 0;
    transform: translateX(100%);
    pointer-events: auto;
}

.toast.active {
    opacity: 1;
    transform: translateX(0);
}

.toast.success {
    border-left-color: var(--secondary-color);
}

.toast.success .toast-icon {
    color: var(--secondary-color);
}

.toast.warning {
    border-left-color: var(--accent-color);
}

.toast.warning .toast-icon {
    color: var(--accent-color);
}

.toast.error {
    border-left-color: var(--danger-color);
}

.toast.error .toast-icon {
    color: var(--danger-color);
}

@keyframes slideIn {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

@keyframes fadeOut {
    from {
        opacity: 1;
    }
    to {
        opacity: 0;
    }
}

.toast-icon {
    color: var(--primary-color);
    font-size: var(--font-size-lg);
}

.toast-message {
    flex: 1;
    font-size: var(--font-size-sm);
}

.toast-close {
    background: transparent;
    border: none;
    cursor: pointer;
    color: var(--text-secondary);
    font-size: var(--font-size-md);
    display: flex;
    align-items: center;
    justify-content: center;
    padding: var(--space-2xs);
    border-radius: 50%;
    transition: background-color var(--transition-speed-fast) var(--ease-in-out),
                color var(--transition-speed-fast) var(--ease-in-out);
}

.toast-close:hover {
    background-color: var(--hover-overlay);
    color: var(--text-color);
}

.toast-close:focus-visible {
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    outline-offset: var(--focus-ring-offset);
}

/* Alarm notification */
.alarm-notification {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: var(--modal-overlay);
    z-index: var(--z-alarming);
    align-items: center;
    justify-content: center;
    padding: var(--space-md);
    animation: fadeIn var(--transition-speed) var(--ease-out);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
}

@keyframes fadeIn {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

.alarm-content {
    background-color: var(--danger-color);
    color: white;
    border-radius: var(--card-radius);
    padding: var(--space-xl);
    max-width: 400px;
    width: 100%;
    text-align: center;
    animation: pulse 1.5s infinite;
    box-shadow: var(--shadow-4),
                0 0 0 10px rgba(234, 67, 53, 0.2),
                0 0 0 20px rgba(234, 67, 53, 0.1);
}

@keyframes pulse {
    0% {
        transform: scale(1);
        box-shadow: var(--shadow-4),
                    0 0 0 10px rgba(234, 67, 53, 0.2),
                    0 0 0 20px rgba(234, 67, 53, 0.1);
    }
    50% {
        transform: scale(1.05);
        box-shadow: var(--shadow-4),
                    0 0 0 15px rgba(234, 67, 53, 0.2),
                    0 0 0 25px rgba(234, 67, 53, 0.1);
    }
    100% {
        transform: scale(1);
        box-shadow: var(--shadow-4),
                    0 0 0 10px rgba(234, 67, 53, 0.2),
                    0 0 0 20px rgba(234, 67, 53, 0.1);
    }
}

.alarm-title {
    font-size: var(--font-size-xl);
    font-weight: var(--font-weight-bold);
    margin-bottom: var(--space-md);
}

.alarm-message {
    font-size: var(--font-size-md);
    margin-bottom: var(--space-xl);
}

.alarm-actions {
    display: flex;
    flex-direction: column;
    gap: var(--space-sm);
}

.alarm-btn {
    background-color: white;
    color: var(--danger-color);
    border: none;
    border-radius: var(--button-radius);
    padding: var(--space-sm) var(--space-xl);
    font-weight: var(--font-weight-bold);
    cursor: pointer;
    transition: background-color var(--transition-speed-fast) var(--ease-in-out),
                transform var(--transition-speed-fast) var(--ease-in-out);
}

.alarm-btn:hover {
    background-color: var(--primary-very-light);
}

.alarm-btn:active {
    transform: scale(0.98);
}

.alarm-btn:focus-visible {
    outline: var(--focus-ring-width) solid rgba(255, 255, 255, 0.5);
    outline-offset: var(--focus-ring-offset);
}

.snooze-options {
    display: flex;
    gap: var(--space-sm);
    justify-content: center;
    margin-top: var(--space-sm);
}

.snooze-option {
    background-color: transparent;
    border: 1px solid white;
    color: white;
    border-radius: var(--input-radius);
    padding: var(--space-xs) var(--space-md);
    cursor: pointer;
    transition: background-color var(--transition-speed-fast) var(--ease-in-out),
                transform var(--transition-speed-fast) var(--ease-in-out);
}

.snooze-option:hover {
    background-color: rgba(255, 255, 255, 0.2);
}

.snooze-option:active {
    transform: scale(0.98);
}

.snooze-option:focus-visible {
    outline: var(--focus-ring-width) solid rgba(255, 255, 255, 0.5);
    outline-offset: var(--focus-ring-offset);
}

/* Alert and message boxes */
.alert {
    padding: var(--space-md);
    border-radius: var(--input-radius);
    margin-bottom: var(--space-md);
    display: flex;
    align-items: flex-start;
    gap: var(--space-sm);
}

.alert-icon {
    font-size: var(--font-size-lg);
    flex-shrink: 0;
    margin-top: 2px;
}

.alert-content {
    flex: 1;
}

.alert-title {
    font-weight: var(--font-weight-semibold);
    margin-bottom: var(--space-2xs);
}

.alert-message {
    font-size: var(--font-size-sm);
}

.alert-info {
    background-color: var(--primary-very-light);
    color: var(--primary-dark);
}

.alert-success {
    background-color: var(--secondary-transparent);
    color: var(--secondary-dark);
}

.alert-warning {
    background-color: var(--accent-transparent);
    color: var(--accent-dark);
}

.alert-danger {
    background-color: var(--danger-transparent);
    color: var(--danger-dark);
}

/*------------------------------------------------------------------------------
 * 17. Utilities & Helper Classes
 *----------------------------------------------------------------------------*/
.hidden {
    display: none !important;
}

.sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
}

.mt-xs { margin-top: var(--space-xs); }
.mt-sm { margin-top: var(--space-sm); }
.mt-md { margin-top: var(--space-md); }
.mt-lg { margin-top: var(--space-lg); }
.mt-xl { margin-top: var(--space-xl); }

.mb-xs { margin-bottom: var(--space-xs); }
.mb-sm { margin-bottom: var(--space-sm); }
.mb-md { margin-bottom: var(--space-md); }
.mb-lg { margin-bottom: var(--space-lg); }
.mb-xl { margin-bottom: var(--space-xl); }

.mx-auto {
    margin-left: auto;
    margin-right: auto;
}

.w-full { width: 100%; }
.w-auto { width: auto; }
.h-full { height: 100%; }
.h-auto { height: auto; }

.rounded { border-radius: var(--input-radius); }
.rounded-lg { border-radius: var(--card-radius); }
.rounded-full { border-radius: 9999px; }

.shadow { box-shadow: var(--shadow-1); }
.shadow-md { box-shadow: var(--shadow-2); }
.shadow-lg { box-shadow: var(--shadow-3); }
.shadow-xl { box-shadow: var(--shadow-4); }

.bg-primary { background-color: var(--primary-color); }
.bg-secondary { background-color: var(--secondary-color); }
.bg-accent { background-color: var(--accent-color); }
.bg-danger { background-color: var(--danger-color); }
.bg-surface { background-color: var(--surface-color); }
.bg-background { background-color: var(--background-color); }

.pointer { cursor: pointer; }
.no-events { pointer-events: none; }

.overflow-hidden { overflow: hidden; }
.overflow-auto { overflow: auto; }
.overflow-scroll { overflow: scroll; }

.relative { position: relative; }
.absolute { position: absolute; }
.fixed { position: fixed; }
.sticky { position: sticky; }

.inset-0 {
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
}

.opacity-0 { opacity: 0; }
.opacity-50 { opacity: 0.5; }
.opacity-75 { opacity: 0.75; }
.opacity-100 { opacity: 1; }

/* Loading spinner */
.loading-spinner {
    display: inline-block;
    width: 20px;
    height: 20px;
    border: 3px solid rgba(255, 255, 255, 0.3);
    border-radius: 50%;
    border-top-color: white;
    animation: spin 1s linear infinite;
    margin-right: var(--space-xs);
}

.loading-spinner.dark {
    border: 3px solid rgba(0, 0, 0, 0.1);
    border-top-color: var(--primary-color);
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

/* Shimmer loading effect */
.shimmer {
    background: linear-gradient(
        90deg,
        var(--surface-color) 0%,
        var(--surface-high) 50%,
        var(--surface-color) 100%
    );
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
}

@keyframes shimmer {
    0% {
        background-position: -200% 0;
    }
    100% {
        background-position: 200% 0;
    }
}

/* Badge */
.badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 2px 8px;
    border-radius: var(--border-radius-full);
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-semibold);
}

.badge-primary {
    background-color: var(--primary-color);
    color: white;
}

.badge-secondary {
    background-color: var(--secondary-color);
    color: white;
}

.badge-accent {
    background-color: var(--accent-color);
    color: var(--text-color);
}

.badge-danger {
    background-color: var(--danger-color);
    color: white;
}

.badge-outline {
    background-color: transparent;
    border: 1px solid var(--border-color);
    color: var(--text-color);
}

/*------------------------------------------------------------------------------
 * 18. Animations & Transitions
 *----------------------------------------------------------------------------*/
.fade-in {
    animation: fadeIn var(--transition-speed) var(--ease-out);
}

.fade-out {
    animation: fadeOut var(--transition-speed) var(--ease-in);
}

.slide-up {
    animation: slideUp var(--transition-speed) var(--ease-out);
}

.slide-down {
    animation: slideDown var(--transition-speed) var(--ease-out);
}

.slide-in-right {
    animation: slideInRight var(--transition-speed) var(--ease-out);
}

.slide-out-right {
    animation: slideOutRight var(--transition-speed) var(--ease-in);
}

@keyframes slideDown {
    from {
        transform: translateY(-100%);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

@keyframes slideInRight {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

@keyframes slideOutRight {
    from {
        transform: translateX(0);
        opacity: 1;
    }
    to {
        transform: translateX(100%);
        opacity: 0;
    }
}

/* Scale Animations */
.scale-in {
    animation: scaleIn var(--transition-speed) var(--ease-bounce);
}

.scale-out {
    animation: scaleOut var(--transition-speed) var(--ease-in);
}

@keyframes scaleIn {
    from {
        transform: scale(0.8);
        opacity: 0;
    }
    to {
        transform: scale(1);
        opacity: 1;
    }
}

@keyframes scaleOut {
    from {
        transform: scale(1);
        opacity: 1;
    }
    to {
        transform: scale(0.8);
        opacity: 0;
    }
}

/* Attention Grabbing Animations */
.shake {
    animation: shake 0.82s cubic-bezier(.36,.07,.19,.97) both;
}

@keyframes shake {
    10%, 90% { transform: translate3d(-1px, 0, 0); }
    20%, 80% { transform: translate3d(2px, 0, 0); }
    30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
    40%, 60% { transform: translate3d(4px, 0, 0); }
}

.pulse {
    animation: simplePulse 2s infinite;
}

@keyframes simplePulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
}

.bounce {
    animation: bounce 1s infinite;
}

@keyframes bounce {
    0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
    40% { transform: translateY(-10px); }
    60% { transform: translateY(-5px); }
}

/*------------------------------------------------------------------------------
 * 19. Media Queries
 *----------------------------------------------------------------------------*/
/* Small screens (mobile) */
@media (max-width: 480px) {
    :root {
        --side-padding: 12px;
        --form-padding: 16px;
    }
    
    .nav-button-label {
        font-size: var(--font-size-2xs);
    }
    
    .app-header {
        padding: 0 var(--side-padding);
    }
    
    .content-area {
        padding: var(--space-sm) var(--side-padding);
    }
    
    .dashboard-summary {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .form-grid {
        grid-template-columns: 1fr;
    }
    
    .filter-row {
        flex-direction: column;
        align-items: stretch;
    }
    
    .filter-group {
        width: 100%;
    }
    
    .settings-item {
        flex-direction: column;
        align-items: flex-start;
        gap: var(--space-sm);
    }
    
    .settings-actions {
        width: 100%;
        justify-content: flex-end;
    }
    
    .modal-actions {
        flex-direction: column-reverse;
        gap: var(--space-sm);
    }
    
    .modal-btn {
        width: 100%;
    }
    
    .toast-container {
        left: var(--side-padding);
        right: var(--side-padding);
        max-width: none;
    }
}

/* Medium screens (tablets) */
@media (min-width: 481px) and (max-width: 768px) {
    .dashboard-summary {
        grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    }
}

/* Large screens (desktops) */
@media (min-width: 769px) {
    :root {
        --side-padding: 24px;
        --form-padding: 24px;
    }
    
    .dashboard-summary {
        grid-template-columns: repeat(4, 1fr);
    }
    
    .form-grid {
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    }
    
    .report-stats {
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    }
    
    .modal-content {
        border-radius: var(--card-radius);
        max-height: 90vh;
    }
    
    .modal {
        align-items: center;
    }
    
    .summary-card {
        transition: transform var(--transition-speed) var(--ease-out), 
                    box-shadow var(--transition-speed) var(--ease-out);
    }
    
    .summary-card:hover {
        transform: translateY(-4px);
        box-shadow: var(--shadow-3);
    }
    
    .nav-button {
        gap: var(--space-xs);
    }
    
    .nav-button-label {
        font-size: var(--font-size-xs);
    }
}

/* Extra large screens */
@media (min-width: 1280px) {
    :root {
        --side-padding: 32px;
    }
    
    .content-area {
        padding: var(--space-lg) var(--side-padding);
    }
    
    .dashboard-sections {
        display: grid;
        grid-template-columns: 2fr 1fr;
        grid-template-rows: auto 1fr;
        gap: var(--space-lg);
    }
    
    .dashboard-section:first-child {
        grid-column: 1 / 2;
        grid-row: 1 / 3;
    }
    
    .dashboard-summary {
        grid-template-columns: repeat(4, 1fr);
    }
}

/* High pixel density screens */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
    :root {
        --shadow-1: 0 0.5px 1px rgba(0, 0, 0, 0.07), 0 1px 2px rgba(0, 0, 0, 0.07);
        --shadow-2: 0 1px 2px rgba(0, 0, 0, 0.07), 0 2px 4px rgba(0, 0, 0, 0.07);
        --shadow-3: 0 2px 4px rgba(0, 0, 0, 0.07), 0 4px 8px rgba(0, 0, 0, 0.07);
        --shadow-4: 0 4px 8px rgba(0, 0, 0, 0.07), 0 8px 16px rgba(0, 0, 0, 0.07);
    }
}

/* Landscape mode for mobile */
@media (max-height: 480px) and (orientation: landscape) {
    .bottom-navigation {
        height: 56px;
    }
    
    .nav-button-icon {
        font-size: var(--font-size-lg);
    }
    
    .nav-button-label {
        font-size: var(--font-size-2xs);
    }
    
    .main-container {
        padding-bottom: 56px;
    }
    
    .floating-button {
        bottom: calc(56px + var(--space-md));
        width: 48px;
        height: 48px;
    }
}

/* Media query for users who prefer reduced motion */
@media (prefers-reduced-motion: reduce) {
    *, *::before, *::after {
        animation-duration: 0.001ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.001ms !important;
        scroll-behavior: auto !important;
    }
}

/*------------------------------------------------------------------------------
 * 20. Print Styles
 *----------------------------------------------------------------------------*/
@media print {
    @page {
        margin: 1cm;
    }
    
    body {
        background-color: white;
        color: black;
        font-size: 12pt;
    }
    
    .app-header,
    .bottom-navigation,
    .floating-button,
    .toast-container,
    .alarm-notification,
    .sleep-timer,
    .track-tabs,
    .btn-submit-container,
    .track-form-container,
    .tracked-actions,
    .btn-export,
    .modal {
        display: none !important;
    }
    
    .content-area {
        padding: 0;
        max-width: 100%;
    }
    
    .main-container {
        padding-bottom: 0;
        overflow: visible;
    }
    
    .dashboard-section,
    .report-section,
    .card,
    .tracked-item,
    .milestone {
        page-break-inside: avoid;
        break-inside: avoid;
        border: 1px solid #ddd;
        box-shadow: none !important;
    }
    
    .dashboard-summary {
        display: flex;
        flex-wrap: wrap;
    }
    
    .summary-card {
        width: 50%;
        box-shadow: none;
        border: 1px solid #ddd;
    }
    
    a {
        text-decoration: underline;
        color: #000;
    }
    
    h1, h2, h3, h4, h5, h6 {
        page-break-after: avoid;
        page-break-inside: avoid;
    }
    
    img {
        max-width: 100% !important;
    }
    
    p, h2, h3 {
        orphans: 3;
        widows: 3;
    }
    
    .chart-container {
        height: auto;
        max-height: 300px;
    }
    
    /* Print header */
    .main-container::before {
        content: "Baby Tracker Pro - Report";
        display: block;
        font-size: 24pt;
        font-weight: bold;
        margin-bottom: 20pt;
        text-align: center;
    }
    
    .tab-content {
        display: block !important;
        opacity: 1 !important;
        transform: none !important;
    }
    
    /* Force background colors to print in modern browsers */
    * {
        -webkit-print-color-adjust: exact !important;
        print-color-adjust: exact !important;
    }
}

/*------------------------------------------------------------------------------
 * 21. Dark Mode Overrides
 *----------------------------------------------------------------------------*/
[data-theme="dark"] .card-value {
    color: var(--text-color);
}

[data-theme="dark"] .toast {
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.25);
}

[data-theme="dark"] .alert-info {
    background-color: var(--primary-transparent);
    color: var(--primary-light);
}

[data-theme="dark"] .alert-success {
    background-color: var(--secondary-transparent);
    color: var(--secondary-light);
}

[data-theme="dark"] .alert-warning {
    background-color: var(--accent-transparent);
    color: var(--accent-light);
}

[data-theme="dark"] .alert-danger {
    background-color: var(--danger-transparent);
    color: var(--danger-light);
}

[data-theme="dark"] .milestone-info {
    background-color: var(--primary-transparent);
}

[data-theme="dark"] .btn-section:hover {
    background-color: var(--primary-transparent);
}

[data-theme="dark"] .btn-tracked:hover {
    background-color: var(--primary-transparent);
}

[data-theme="dark"] .btn-tracked.btn-delete:hover {
    background-color: var(--danger-color);
}

[data-theme="dark"] .shimmer {
    background: linear-gradient(
        90deg,
        var(--surface-color) 0%,
        var(--surface-high) 50%,
        var(--surface-color) 100%
    );
}

/*==============================================================================
 * Baby Tracker Pro - Advanced Stylesheet
 * Version: 2.0
 * 
 * A comprehensive stylesheet with advanced features including:
 * - Dynamic theming with CSS variables
 * - Fluid responsive design
 * - Advanced animations and transitions
 * - Optimized dark mode
 * - Accessibility improvements
 * - Print styles for reports
 *============================================================================*/

/*------------------------------------------------------------------------------
 * TABLE OF CONTENTS:
 * 1. CSS Variables & Custom Properties
 * 2. Reset & Base Styles
 * 3. Typography
 * 4. Layout Containers
 * 5. Header Components
 * 6. Navigation Elements
 * 7. Dashboard Components
 * 8. Forms & Input Controls
 * 9. Cards & Content Containers
 * 10. Buttons & Interactive Elements
 * 11. Trackers & Activity Items
 * 12. Charts & Data Visualization
 * 13. Milestone Components
 * 14. Report Components
 * 15. Modal & Dialog Elements
 * 16. Notifications & Alerts
 * 17. Utilities & Helper Classes
 * 18. Animations & Transitions
 * 19. Media Queries
 * 20. Print Styles
 * 21. Dark Mode Overrides
 *----------------------------------------------------------------------------*/

/*------------------------------------------------------------------------------
 * 1. CSS Variables & Custom Properties
 *----------------------------------------------------------------------------*/
:root {
    /* Color Palette - Light Theme */
    --primary-hue: 217;
    --primary-color: hsl(var(--primary-hue), 89%, 61%);
    --primary-dark: hsl(var(--primary-hue), 67%, 53%);
    --primary-light: hsl(var(--primary-hue), 92%, 76%);
    --primary-very-light: hsl(var(--primary-hue), 100%, 95%);
    --primary-transparent: hsla(var(--primary-hue), 89%, 61%, 0.1);
    
    --secondary-hue: 137;
    --secondary-color: hsl(var(--secondary-hue), 50%, 43%);
    --secondary-light: hsl(var(--secondary-hue), 38%, 76%);
    --secondary-dark: hsl(var(--secondary-hue), 74%, 28%);
    --secondary-transparent: hsla(var(--secondary-hue), 50%, 43%, 0.1);
    
    --accent-hue: 45;
    --accent-color: hsl(var(--accent-hue), 98%, 50%);
    --accent-light: hsl(var(--accent-hue), 90%, 76%);
    --accent-dark: hsl(var(--accent-hue), 100%, 40%);
    --accent-transparent: hsla(var(--accent-hue), 98%, 50%, 0.1);
    
    --danger-hue: 4;
    --danger-color: hsl(var(--danger-hue), 81%, 56%);
    --danger-light: hsl(var(--danger-hue), 81%, 82%);
    --danger-dark: hsl(var(--danger-hue), 74%, 42%);
    --danger-transparent: hsla(var(--danger-hue), 81%, 56%, 0.1);
    
    --success-color: var(--secondary-color);
    --success-light: var(--secondary-light);
    --warning-color: var(--accent-color);
    --warning-light: var(--accent-light);
    --info-color: var(--primary-color);
    --info-light: var(--primary-light);
    
    /* Neutral Colors */
    --text-color: hsl(220, 9%, 14%);
    --text-secondary: hsl(220, 4%, 38%);
    --text-tertiary: hsl(220, 4%, 50%);
    --text-disabled: hsl(220, 4%, 62%);
    --background-color: hsl(0, 0%, 100%);
    --surface-color: hsl(210, 17%, 98%);
    --surface-high: hsl(0, 0%, 100%);
    --surface-low: hsl(220, 13%, 94%);
    --border-color: hsl(220, 9%, 87%);
    --border-light: hsl(220, 13%, 94%);
    
    /* Elevation and Shadows */
    --shadow-ambient: 0 1px 3px rgba(0, 0, 0, 0.1);
    --shadow-1: 0 1px 2px rgba(0, 0, 0, 0.07), 0 2px 4px rgba(0, 0, 0, 0.07); 
    --shadow-2: 0 2px 4px rgba(0, 0, 0, 0.07), 0 4px 8px rgba(0, 0, 0, 0.07);
    --shadow-3: 0 4px 8px rgba(0, 0, 0, 0.07), 0 8px 16px rgba(0, 0, 0, 0.07);
    --shadow-4: 0 8px 16px rgba(0, 0, 0, 0.07), 0 16px 32px rgba(0, 0, 0, 0.07);
    --shadow-inset: inset 0 2px 4px rgba(0, 0, 0, 0.05);
    
    /* Overlays */
    --hover-overlay: rgba(0, 0, 0, 0.04);
    --active-overlay: rgba(0, 0, 0, 0.08);
    --disabled-overlay: rgba(0, 0, 0, 0.12);
    --modal-overlay: rgba(0, 0, 0, 0.5);
    
    /* Layout & Sizing */
    --border-radius-xs: 4px;
    --border-radius-sm: 8px;
    --border-radius: 12px;
    --border-radius-lg: 16px;
    --border-radius-xl: 24px;
    --border-radius-full: 9999px;
    
    --input-radius: var(--border-radius-sm);
    --button-radius: var(--border-radius-xl);
    --card-radius: var(--border-radius);
    
    --space-unit: 4px;
    --space-2xs: calc(var(--space-unit) * 1);  /* 4px */
    --space-xs: calc(var(--space-unit) * 2);   /* 8px */
    --space-sm: calc(var(--space-unit) * 3);   /* 12px */
    --space-md: calc(var(--space-unit) * 4);   /* 16px */
    --space-lg: calc(var(--space-unit) * 6);   /* 24px */
    --space-xl: calc(var(--space-unit) * 8);   /* 32px */
    --space-2xl: calc(var(--space-unit) * 12); /* 48px */
    --space-3xl: calc(var(--space-unit) * 16); /* 64px */
    
    --header-height: 56px;
    --bottom-nav-height: 72px;
    --tab-height: 56px;
    --floating-button-size: 56px;
    --side-padding: var(--space-md);
    --content-max-width: 1200px;
    
    /* Typography */
    --font-main: 'Nunito', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    --font-headings: 'Montserrat', 'Nunito', sans-serif;
    --font-mono: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
    
    --font-size-2xs: 0.625rem;  /* 10px */
    --font-size-xs: 0.75rem;    /* 12px */
    --font-size-sm: 0.875rem;   /* 14px */
    --font-size-base: 1rem;     /* 16px */
    --font-size-md: 1.125rem;   /* 18px */
    --font-size-lg: 1.25rem;    /* 20px */
    --font-size-xl: 1.5rem;     /* 24px */
    --font-size-2xl: 1.75rem;   /* 28px */
    --font-size-3xl: 2rem;      /* 32px */
    
    --font-weight-light: 300;
    --font-weight-normal: 400;
    --font-weight-medium: 500;
    --font-weight-semibold: 600;
    --font-weight-bold: 700;
    
    --line-height-tight: 1.1;
    --line-height-none: 1;
    --line-height-normal: 1.5;
    --line-height-relaxed: 1.75;
    
    /* Animation & Transitions */
    --transition-speed-fast: 150ms;
    --transition-speed: 250ms;
    --transition-speed-slow: 350ms;
    --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);
    --ease-out: cubic-bezier(0, 0, 0.2, 1);
    --ease-in: cubic-bezier(0.4, 0, 1, 1);
    --ease-bounce: cubic-bezier(0.34, 1.56, 0.64, 1);
    
    /* Z-index layers */
    --z-negative: -1;
    --z-base: 1;
    --z-dropdown: 10;
    --z-tooltip: 20;
    --z-sticky: 50;
    --z-bottom-nav: 100;
    --z-header: 110;
    --z-floating-button: 120;
    --z-overlay: 200;
    --z-modal: 300;
    --z-toast: 400;
    --z-alarming: 500;
    
    /* Focus outline */
    --focus-ring-color: rgba(66, 133, 244, 0.5);
    --focus-ring-width: 3px;
    --focus-ring-offset: 2px;
}

/* Dark theme variables */
[data-theme="dark"] {
    /* Color Adjustments for Dark Theme */
    --primary-color: hsl(var(--primary-hue), 92%, 76%);
    --primary-dark: hsl(var(--primary-hue), 72%, 69%);
    --primary-light: hsl(var(--primary-hue), 95%, 83%);
    --primary-very-light: hsl(var(--primary-hue), 15%, 20%);
    --primary-transparent: hsla(var(--primary-hue), 92%, 76%, 0.1);
    
    --secondary-color: hsl(var(--secondary-hue), 50%, 70%);
    --secondary-light: hsl(var(--secondary-hue), 35%, 45%);
    --secondary-dark: hsl(var(--secondary-hue), 60%, 60%);
    --secondary-transparent: hsla(var(--secondary-hue), 50%, 70%, 0.1);
    
    --accent-color: hsl(var(--accent-hue), 80%, 62%);
    --accent-light: hsl(var(--accent-hue), 70%, 40%);
    --accent-dark: hsl(var(--accent-hue), 90%, 70%);
    --accent-transparent: hsla(var(--accent-hue), 80%, 62%, 0.1);
    
    --danger-color: hsl(var(--danger-hue), 81%, 72%);
    --danger-light: hsl(var(--danger-hue), 61%, 56%);
    --danger-dark: hsl(var(--danger-hue), 90%, 80%);
    --danger-transparent: hsla(var(--danger-hue), 81%, 72%, 0.1);
    
    /* Neutral Colors for Dark Theme */
    --text-color: hsl(210, 17%, 92%);
    --text-secondary: hsl(210, 9%, 70%);
    --text-tertiary: hsl(210, 7%, 60%);
    --text-disabled: hsl(210, 5%, 45%);
    --background-color: hsl(223, 6%, 13%);
    --surface-color: hsl(223, 4%, 16%);
    --surface-high: hsl(223, 4%, 19%);
    --surface-low: hsl(223, 4%, 11%);
    --border-color: hsl(223, 4%, 25%);
    --border-light: hsl(223, 4%, 20%);
    
    /* Elevation and Shadows Adjustments */
    --shadow-ambient: 0 1px 3px rgba(0, 0, 0, 0.25);
    --shadow-1: 0 1px 2px rgba(0, 0, 0, 0.2), 0 2px 4px rgba(0, 0, 0, 0.2);
    --shadow-2: 0 2px 4px rgba(0, 0, 0, 0.2), 0 4px 8px rgba(0, 0, 0, 0.2);
    --shadow-3: 0 4px 8px rgba(0, 0, 0, 0.2), 0 8px 16px rgba(0, 0, 0, 0.2);
    --shadow-4: 0 8px 16px rgba(0, 0, 0, 0.2), 0 16px 32px rgba(0, 0, 0, 0.2);
    --shadow-inset: inset 0 2px 4px rgba(0, 0, 0, 0.15);
    
    /* Overlays for Dark Theme */
    --hover-overlay: rgba(255, 255, 255, 0.05);
    --active-overlay: rgba(255, 255, 255, 0.1);
    --disabled-overlay: rgba(255, 255, 255, 0.05);
    --modal-overlay: rgba(0, 0, 0, 0.7);
    
    /* Focus outline adjustment */
    --focus-ring-color: rgba(138, 180, 248, 0.5);
}

/* High contrast mode support */
@media (prefers-contrast: high) {
    :root {
        --primary-color: hsl(var(--primary-hue), 100%, 40%);
        --border-color: hsl(220, 9%, 20%);
        --focus-ring-color: rgba(0, 0, 0, 0.9);
        --focus-ring-width: 4px;
    }
    
    [data-theme="dark"] {
        --primary-color: hsl(var(--primary-hue), 100%, 70%);
        --border-color: hsl(220, 9%, 70%);
        --focus-ring-color: rgba(255, 255, 255, 0.9);
    }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
    :root {
        --transition-speed-fast: 0ms;
        --transition-speed: 0ms;
        --transition-speed-slow: 0ms;
    }
}

/*------------------------------------------------------------------------------
 * 2. Reset & Base Styles
 *----------------------------------------------------------------------------*/
*, *::before, *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

html {
    font-size: 100%;
    height: 100%;
    scroll-behavior: smooth;
    text-size-adjust: 100%;
    -webkit-text-size-adjust: 100%; 
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

@media (prefers-reduced-motion: reduce) {
    html {
        scroll-behavior: auto;
    }
}

body {
    height: 100%;
    width: 100%;
    overflow-x: hidden;
    font-family: var(--font-main);
    font-size: var(--font-size-base);
    line-height: var(--line-height-normal);
    font-weight: var(--font-weight-normal);
    color: var(--text-color);
    background-color: var(--background-color);
    transition: background-color var(--transition-speed) var(--ease-in-out), 
                color var(--transition-speed) var(--ease-in-out);
    -webkit-tap-highlight-color: transparent;
}

/* Prevent scrolling when modal is open */
body.modal-open {
    overflow: hidden;
}

/* Images */
img {
    max-width: 100%;
    height: auto;
    display: block;
}

/* Lists */
ul, ol {
    list-style: none;
    padding: 0;
    margin: 0;
}

/* Tables */
table {
    width: 100%;
    border-collapse: collapse;
    border-spacing: 0;
}

/* Links */
a {
    color: var(--primary-color);
    text-decoration: none;
    transition: color var(--transition-speed-fast) var(--ease-in-out);
}

a:hover {
    color: var(--primary-dark);
    text-decoration: underline;
}

a:focus-visible {
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    outline-offset: var(--focus-ring-offset);
    border-radius: var(--border-radius-xs);
}

/* Selection */
::selection {
    background-color: var(--primary-transparent);
    color: var(--text-color);
}

/* Scrollbar styles */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: var(--surface-low);
    border-radius: 4px;
}

::-webkit-scrollbar-thumb {
    background: var(--border-color);
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: var(--text-tertiary);
}

/* Focus Styles */
:focus-visible {
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    outline-offset: var(--focus-ring-offset);
}

/*------------------------------------------------------------------------------
 * 3. Typography
 *----------------------------------------------------------------------------*/
h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-headings);
    font-weight: var(--font-weight-semibold);
    line-height: var(--line-height-tight);
    margin-bottom: 0.5em;
    color: var(--text-color);
}

h1 {
    font-size: var(--font-size-3xl);
}

h2 {
    font-size: var(--font-size-2xl);
}

h3 {
    font-size: var(--font-size-xl);
}

h4 {
    font-size: var(--font-size-lg);
}

h5 {
    font-size: var(--font-size-md);
}

h6 {
    font-size: var(--font-size-base);
}

p {
    margin-bottom: 1rem;
}

small, .text-small {
    font-size: var(--font-size-sm);
}

.text-xs {
    font-size: var(--font-size-xs);
}

.text-2xs {
    font-size: var(--font-size-2xs);
}

.text-md {
    font-size: var(--font-size-md);
}

.text-lg {
    font-size: var(--font-size-lg);
}

.text-xl {
    font-size: var(--font-size-xl);
}

.text-2xl {
    font-size: var(--font-size-2xl);
}

.text-3xl {
    font-size: var(--font-size-3xl);
}

.font-light {
    font-weight: var(--font-weight-light);
}

.font-normal {
    font-weight: var(--font-weight-normal);
}

.font-medium {
    font-weight: var(--font-weight-medium);
}

.font-semibold {
    font-weight: var(--font-weight-semibold);
}

.font-bold {
    font-weight: var(--font-weight-bold);
}

.text-primary {
    color: var(--primary-color);
}

.text-secondary {
    color: var(--secondary-color);
}

.text-accent {
    color: var(--accent-color);
}

.text-danger {
    color: var(--danger-color);
}

.text-muted {
    color: var(--text-secondary);
}

.text-center {
    text-align: center;
}

.text-right {
    text-align: right;
}

.text-uppercase {
    text-transform: uppercase;
}

.text-capitalize {
    text-transform: capitalize;
}

.monospace {
    font-family: var(--font-mono);
}

.truncate {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

/*------------------------------------------------------------------------------
 * 4. Layout Containers
 *----------------------------------------------------------------------------*/
#app {
    display: flex;
    flex-direction: column;
    min-height: 100%;
    width: 100%;
    max-width: 100%;
    position: relative;
    overflow-x: hidden;
}

.main-container {
    flex: 1;
    overflow-x: hidden;
    overflow-y: auto;
    position: relative;
    padding-bottom: calc(var(--bottom-nav-height) + var(--space-md));
    will-change: transform; /* Optimize for scroll performance */
    isolation: isolate; /* Create stacking context */
}

.content-area {
    max-width: var(--content-max-width);
    margin: 0 auto;
    padding: var(--space-md) var(--side-padding);
    width: 100%;
}

.tab-content {
    display: none;
    opacity: 0;
    transform: translateY(var(--space-sm));
    transition: opacity var(--transition-speed) var(--ease-out), 
                transform var(--transition-speed) var(--ease-out);
}

.tab-content.active {
    display: block;
    opacity: 1;
    transform: translateY(0);
    animation: fadeSlideIn var(--transition-speed) var(--ease-out);
}

@keyframes fadeSlideIn {
    from {
        opacity: 0;
        transform: translateY(var(--space-sm));
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.section {
    margin-bottom: var(--space-lg);
}

.grid {
    display: grid;
    gap: var(--space-md);
}

.grid-2 {
    grid-template-columns: repeat(2, 1fr);
}

.grid-3 {
    grid-template-columns: repeat(3, 1fr);
}

.grid-4 {
    grid-template-columns: repeat(4, 1fr);
}

.flex {
    display: flex;
}

.flex-col {
    flex-direction: column;
}

.items-center {
    align-items: center;
}

.justify-center {
    justify-content: center;
}

.justify-between {
    justify-content: space-between;
}

.gap-xs {
    gap: var(--space-xs);
}

.gap-sm {
    gap: var(--space-sm);
}

.gap-md {
    gap: var(--space-md);
}

.gap-lg {
    gap: var(--space-lg);
}

.gap-xl {
    gap: var(--space-xl);
}

.spacer {
    flex: 1;
}

/* Container for fixed width content */
.container {
    width: 100%;
    padding-left: var(--side-padding);
    padding-right: var(--side-padding);
    margin-left: auto;
    margin-right: auto;
}

@media (min-width: 640px) {
    .container {
        max-width: 640px;
    }
}

@media (min-width: 768px) {
    .container {
        max-width: 768px;
    }
}

@media (min-width: 1024px) {
    .container {
        max-width: 1024px;
    }
}

@media (min-width: 1280px) {
    .container {
        max-width: 1280px;
    }
}

/*------------------------------------------------------------------------------
 * 5. Header Components
 *----------------------------------------------------------------------------*/
.app-header {
    height: var(--header-height);
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 var(--side-padding);
    background-color: var(--background-color);
    color: var(--text-color);
    border-bottom: 1px solid var(--border-color);
    position: sticky;
    top: 0;
    z-index: var(--z-header);
    width: 100%;
    transition: background-color var(--transition-speed) var(--ease-in-out), 
                color var(--transition-speed) var(--ease-in-out), 
                border-color var(--transition-speed) var(--ease-in-out);
    box-shadow: var(--shadow-ambient);
}

.logo-container {
    display: flex;
    align-items: center;
    gap: var(--space-xs);
}

.logo-container h1 {
    font-family: var(--font-headings);
    font-size: var(--font-size-md);
    font-weight: var(--font-weight-bold);
    margin-bottom: 0;
}

.logo-icon {
    font-size: var(--font-size-xl);
}

.header-actions {
    display: flex;
    align-items: center;
    gap: var(--space-md);
}

.header-button {
    background: transparent;
    border: none;
    border-radius: 50%;
    width: var(--space-xl);
    height: var(--space-xl);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-color);
    cursor: pointer;
    transition: background-color var(--transition-speed-fast) var(--ease-in-out);
    font-size: var(--font-size-lg);
    position: relative;
}

.header-button:hover {
    background-color: var(--hover-overlay);
}

.header-button:active {
    background-color: var(--active-overlay);
}

.header-button:focus-visible {
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    outline-offset: var(--focus-ring-offset);
}

.header-button-badge {
    position: absolute;
    top: 0;
    right: 0;
    width: 16px;
    height: 16px;
    border-radius: 50%;
    background-color: var(--danger-color);
    color: white;
    font-size: var(--font-size-2xs);
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: var(--font-weight-bold);
}

/*------------------------------------------------------------------------------
 * 6. Navigation Elements
 *----------------------------------------------------------------------------*/
.bottom-navigation {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    height: var(--bottom-nav-height);
    background-color: var(--surface-high);
    border-top: 1px solid var(--border-color);
    display: flex;
    justify-content: space-around;
    align-items: center;
    z-index: var(--z-bottom-nav);
    transition: background-color var(--transition-speed) var(--ease-in-out), 
                border-color var(--transition-speed) var(--ease-in-out);
    padding-bottom: env(safe-area-inset-bottom, 0);
    box-shadow: var(--shadow-ambient);
}

.nav-button {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: var(--space-2xs);
    height: 100%;
    background: transparent;
    border: none;
    cursor: pointer;
    color: var(--text-secondary);
    padding: var(--space-xs);
    transition: color var(--transition-speed-fast) var(--ease-in-out), 
                background-color var(--transition-speed-fast) var(--ease-in-out);
    position: relative;
    overflow: hidden;
    user-select: none;
    -webkit-tap-highlight-color: transparent;
}

.nav-button.active {
    color: var(--primary-color);
}

.nav-button:hover {
    background-color: var(--hover-overlay);
}

.nav-button:active {
    background-color: var(--active-overlay);
}

.nav-button:focus-visible {
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    outline-offset: calc(var(--focus-ring-offset) * -1);
}

.nav-button-icon {
    font-size: var(--font-size-xl);
    transition: transform var(--transition-speed-fast) var(--ease-out);
}

.nav-button.active .nav-button-icon {
    transform: scale(1.1);
}

.nav-button-label {
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-semibold);
    transition: transform var(--transition-speed-fast) var(--ease-out), 
                opacity var(--transition-speed-fast) var(--ease-out);
}

/* Nav button indicator/ripple effect */
.nav-button::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 50%;
    width: 0;
    height: 3px;
    background-color: var(--primary-color);
    transition: width var(--transition-speed) var(--ease-out),
                left var(--transition-speed) var(--ease-out);
    border-radius: var(--border-radius-xs) var(--border-radius-xs) 0 0;
}

.nav-button.active::after {
    width: 40%;
    left: 30%;
}

/* Track tabs navigation */
.track-tabs {
    display: flex;
    overflow-x: auto;
    margin-bottom: var(--space-md);
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE and Edge */
    background-color: var(--surface-color);
    border-radius: var(--border-radius);
    padding: var(--space-2xs);
    box-shadow: var(--shadow-ambient);
}

.track-tabs::-webkit-scrollbar {
    display: none; /* Chrome, Safari and Opera */
}

.track-tab {
    flex: 1;
    min-width: 80px;
    padding: var(--space-sm) var(--space-md);
    background: transparent;
    border: none;
    border-radius: var(--input-radius);
    color: var(--text-secondary);
    font-weight: var(--font-weight-semibold);
    cursor: pointer;
    transition: background-color var(--transition-speed-fast) var(--ease-in-out), 
                color var(--transition-speed-fast) var(--ease-in-out);
    white-space: nowrap;
    user-select: none;
}

.track-tab.active {
    background-color: var(--primary-color);
    color: white;
    box-shadow: var(--shadow-1);
}

.track-tab:not(.active):hover {
    background-color: var(--hover-overlay);
}

.track-tab:focus-visible {
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    outline-offset: calc(var(--focus-ring-offset) * -1);
}

/*------------------------------------------------------------------------------
 * 7. Dashboard Components
 *----------------------------------------------------------------------------*/
.dashboard-summary {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: var(--space-md);
    margin-bottom: var(--space-xl);
}

.summary-card {
    background-color: var(--surface-color);
    border-radius: var(--card-radius);
    padding: var(--space-md);
    box-shadow: var(--shadow-1);
    display: flex;
    flex-direction: column;
    position: relative;
    overflow: hidden;
    transition: transform var(--transition-speed-fast) var(--ease-out), 
                box-shadow var(--transition-speed-fast) var(--ease-out);
    backface-visibility: hidden;
}

.summary-card:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-2);
}

.summary-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background-color: var(--primary-color);
    opacity: 0.7;
}

.summary-card#last-feeding-card::before {
    background-color: var(--primary-color);
}

.summary-card#last-diaper-card::before {
    background-color: var(--secondary-color);
}

.summary-card#sleep-card::before {
    background-color: var(--accent-color);
}

.summary-card#age-card::before {
    background-color: var(--danger-color);
}

.card-heading {
    font-family: var(--font-headings);
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    margin-bottom: var(--space-xs);
    display: flex;
    align-items: center;
    gap: var(--space-2xs);
}

.card-icon {
    font-size: var(--font-size-md);
}

.card-value {
    font-size: var(--font-size-xl);
    font-weight: var(--font-weight-bold);
    margin-bottom: var(--space-2xs);
    line-height: var(--line-height-tight);
}

.card-caption {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    line-height: var(--line-height-tight);
}

.time-info {
    color: var(--text-secondary);
    font-size: var(--font-size-xs);
    margin-top: var(--space-2xs);
    line-height: var(--line-height-tight);
}

.dashboard-sections {
    display: flex;
    flex-direction: column;
    gap: var(--space-xl);
}

.dashboard-section {
    background-color: var(--surface-color);
    border-radius: var(--card-radius);
    padding: var(--space-lg);
    box-shadow: var(--shadow-1);
    transition: box-shadow var(--transition-speed-fast) var(--ease-out);
}

.dashboard-section:hover {
    box-shadow: var(--shadow-2);
}

.section-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: var(--space-md);
}

.section-title {
    font-family: var(--font-headings);
    font-size: var(--font-size-md);
    font-weight: var(--font-weight-semibold);
    margin-bottom: 0;
}

.section-actions {
    display: flex;
    gap: var(--space-xs);
}

.btn-section {
    background-color: transparent;
    border: none;
    color: var(--primary-color);
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-semibold);
    cursor: pointer;
    padding: var(--space-2xs) var(--space-sm);
    border-radius: var(--border-radius-xl);
    transition: background-color var(--transition-speed-fast) var(--ease-in-out);
}

.btn-section:hover {
    background-color: var(--primary-very-light);
}

.btn-section:focus-visible {
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    outline-offset: var(--focus-ring-offset);
}

.upcoming-items {
    display: flex;
    flex-direction: column;
    gap: var(--space-sm);
}

.upcoming-item {
    display: flex;
    align-items: center;
    padding: var(--space-sm);
    background-color: var(--background-color);
    border-radius: var(--input-radius);
    transition: transform var(--transition-speed-fast) var(--ease-out),
                box-shadow var(--transition-speed-fast) var(--ease-out);
    position: relative;
    overflow: hidden;
}

.upcoming-item:hover {
    transform: translateX(var(--space-2xs));
    box-shadow: var(--shadow-1);
}

.upcoming-item::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 3px;
    background-color: var(--primary-color);
    border-radius: 4px 0 0 4px;
}

.upcoming-item.feeding::before {
    background-color: var(--primary-color);
}

.upcoming-item.diaper::before {
    background-color: var(--secondary-color);
}

.upcoming-item.sleep::before {
    background-color: var(--accent-color);
}

.upcoming-icon {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background-color: var(--primary-very-light);
    color: var(--primary-color);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--font-size-lg);
    margin-right: var(--space-sm);
    flex-shrink: 0;
}

.upcoming-icon.feeding {
    background-color: var(--primary-very-light);
    color: var(--primary-color);
}

.upcoming-icon.diaper {
    background-color: var(--secondary-transparent);
    color: var(--secondary-color);
}

.upcoming-icon.sleep {
    background-color: var(--accent-transparent);
    color: var(--accent-color);
}

.upcoming-details {
    flex: 1;
}

.upcoming-title {
    font-weight: var(--font-weight-semibold);
    margin-bottom: 2px;
}

.upcoming-time {
    color: var(--text-secondary);
    font-size: var(--font-size-sm);
}

.upcoming-confidence {
    font-size: var(--font-size-xs);
    padding: 2px 8px;
    border-radius: 12px;
    margin-left: var(--space-xs);
    font-weight: var(--font-weight-medium);
}

.confidence-high {
    background-color: var(--secondary-light);
    color: var(--background-color);
}

.confidence-medium {
    background-color: var(--accent-light);
    color: var(--text-color);
}

.confidence-low {
    background-color: var(--danger-light);
    color: var(--background-color);
}

.recent-activities {
    display: flex;
    flex-direction: column;
    gap: var(--space-xs);
}

.activity-item {
    display: flex;
    align-items: center;
    padding: var(--space-sm);
    border-radius: var(--input-radius);
    background-color: var(--background-color);
    transition: transform var(--transition-speed-fast) var(--ease-out),
                box-shadow var(--transition-speed-fast) var(--ease-out);
    position: relative;
}

.activity-item:hover {
    transform: translateX(var(--space-2xs));
    box-shadow: var(--shadow-1);
}

.activity-icon {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background-color: var(--primary-very-light);
    color: var(--primary-color);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--font-size-md);
    margin-right: var(--space-sm);
    flex-shrink: 0;
}

.activity-icon.feeding {
    background-color: var(--primary-very-light);
    color: var(--primary-color);
}

.activity-icon.diaper {
    background-color: var(--secondary-transparent);
    color: var(--secondary-color);
}

.activity-icon.sleep {
    background-color: var(--accent-transparent);
    color: var(--accent-color);
}

.activity-icon.growth {
    background-color: var(--danger-transparent);
    color: var(--danger-color);
}

.activity-icon.health {
    background-color: var(--info-light);
    color: var(--info-color);
}

.activity-details {
    flex: 1;
}

.activity-title {
    font-weight: var(--font-weight-semibold);
    font-size: var(--font-size-sm);
}

.activity-time {
    color: var(--text-secondary);
    font-size: var(--font-size-xs);
    margin-top: 2px;
}

.activity-meta {
    font-size: var(--font-size-xs);
    color: var(--text-secondary);
    margin-top: 2px;
}

.chart-container {
    margin-top: var(--space-md);
    height: 200px;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: var(--background-color);
    border-radius: var(--input-radius);
    padding: var(--space-md);
}

.no-data-message {
    text-align: center;
    color: var(--text-secondary);
    padding: var(--space-lg);
    font-size: var(--font-size-sm);
}

.no-data-message:empty {
    display: none;
}

/*------------------------------------------------------------------------------
 * 8. Forms & Input Controls
 *----------------------------------------------------------------------------*/
.track-form-container {
    background-color: var(--surface-color);
    border-radius: var(--card-radius);
    padding: var(--space-lg);
    margin-bottom: var(--space-xl);
    box-shadow: var(--shadow-1);
}

.form-title {
    font-family: var(--font-headings);
    font-size: var(--font-size-md);
    margin-bottom: var(--space-md);
    font-weight: var(--font-weight-semibold);
}

.form-group {
    margin-bottom: var(--space-md);
}

.form-label {
    display: block;
    margin-bottom: var(--space-xs);
    font-weight: var(--font-weight-semibold);
}

.form-hint {
    font-size: var(--font-size-xs);
    color: var(--text-secondary);
    margin-top: var(--space-2xs);
}

.track-form {
    display: none;
    animation: fadeIn var(--transition-speed) var(--ease-out);
}

.track-form.active {
    display: block;
}

@keyframes fadeIn {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

.form-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: var(--space-sm);
}

.input-field {
    width: 100%;
    padding: var(--space-sm) var(--space-md);
    border: 1px solid var(--border-color);
    border-radius: var(--input-radius);
    font-family: var(--font-main);
    font-size: var(--font-size-base);
    background-color: var(--background-color);
    color: var(--text-color);
    transition: border-color var(--transition-speed-fast) var(--ease-in-out), 
                box-shadow var(--transition-speed-fast) var(--ease-in-out),
                background-color var(--transition-speed-fast) var(--ease-in-out);
}

.input-field:hover {
    border-color: var(--primary-light);
}

.input-field:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 2px var(--primary-transparent);
}

.input-field:disabled,
.input-field[readonly] {
    background-color: var(--surface-low);
    cursor: not-allowed;
    opacity: 0.7;
}

.input-field::placeholder {
    color: var(--text-tertiary);
}

textarea.input-field {
    resize: vertical;
    min-height: 80px;
}

.checkbox-container {
    display: flex;
    gap: var(--space-xs);
    align-items: center;
    margin-top: var(--space-xs);
}

.checkbox-container label {
    cursor: pointer;
}

/* Custom checkbox */
.checkbox-container input[type="checkbox"] {
    -webkit-appearance: none;
    appearance: none;
    width: 20px;
    height: 20px;
    border: 1px solid var(--border-color);
    border-radius: 4px;
    background-color: var(--background-color);
    display: grid;
    place-content: center;
    transition: background-color var(--transition-speed-fast) var(--ease-in-out), 
                border-color var(--transition-speed-fast) var(--ease-in-out);
    cursor: pointer;
}

.checkbox-container input[type="checkbox"]::before {
    content: "";
    width: 12px;
    height: 12px;
    transform: scale(0);
    transition: transform var(--transition-speed-fast) var(--ease-bounce);
    box-shadow: inset 1em 1em var(--primary-color);
    transform-origin: center;
    clip-path: polygon(14% 44%, 0 65%, 50% 100%, 100% 16%, 80% 0%, 43% 62%);
}

.checkbox-container input[type="checkbox"]:checked {
    background-color: var(--primary-transparent);
    border-color: var(--primary-color);
}

.checkbox-container input[type="checkbox"]:checked::before {
    transform: scale(1);
}

.checkbox-container input[type="checkbox"]:focus-visible {
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    outline-offset: var(--focus-ring-offset);
}

select.input-field {
    appearance: none;
    background-image: url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%235f6368' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right var(--space-md) center;
    padding-right: var(--space-2xl);
}

[data-theme="dark"] select.input-field {
    background-image: url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%239aa0a6' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
}

.toggle-group {
    display: flex;
    background-color: var(--background-color);
    border-radius: var(--input-radius);
    border: 1px solid var(--border-color);
    overflow: hidden;
}

.toggle-option {
    flex: 1;
    background: transparent;
    border: none;
    padding: var(--space-sm);
    cursor: pointer;
    font-family: var(--font-main);
    font-weight: var(--font-weight-semibold);
    color: var(--text-secondary);
    transition: background-color var(--transition-speed-fast) var(--ease-in-out), 
                color var(--transition-speed-fast) var(--ease-in-out);
    position: relative;
}

.toggle-option:not(:last-child):after {
    content: '';
    position: absolute;
    right: 0;
    top: var(--space-sm);
    bottom: var(--space-sm);
    width: 1px;
    background-color: var(--border-color);
}

.toggle-option.selected {
    background-color: var(--primary-color);
    color: white;
}

.toggle-option:not(.selected):hover {
    background-color: var(--hover-overlay);
}

.toggle-option:focus-visible {
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    outline-offset: calc(var(--focus-ring-offset) * -1);
    z-index: 1;
}

.btn-submit-container {
    margin-top: var(--space-lg);
    display: flex;
    justify-content: flex-end;
}

.btn-submit {
    background-color: var(--primary-color);
    color: white;
    border: none;
    border-radius: var(--button-radius);
    padding: var(--space-sm) var(--space-xl);
    font-family: var(--font-main);
    font-weight: var(--font-weight-semibold);
    font-size: var(--font-size-base);
    cursor: pointer;
    transition: background-color var(--transition-speed-fast) var(--ease-in-out), 
                transform var(--transition-speed-fast) var(--ease-in-out),
                box-shadow var(--transition-speed-fast) var(--ease-in-out);
    box-shadow: var(--shadow-1);
}

.btn-submit:hover {
    background-color: var(--primary-dark);
    box-shadow: var(--shadow-2);
}

.btn-submit:active {
    transform: scale(0.98);
}

.btn-submit:focus-visible {
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    outline-offset: var(--focus-ring-offset);
}

/* Custom range input styling */
input[type="range"] {
    -webkit-appearance: none;
    appearance: none;
    width: 100%;
    height: 6px;
    background: var(--surface-low);
    border-radius: var(--border-radius-full);
    outline: none;
    transition: background-color var(--transition-speed-fast) var(--ease-in-out);
}

input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: var(--primary-color);
    cursor: pointer;
    transition: transform var(--transition-speed-fast) var(--ease-out),
                background-color var(--transition-speed-fast) var(--ease-in-out);
}

input[type="range"]::-moz-range-thumb {
    width: 20px;
    height: 20px;
    border: none;
    border-radius: 50%;
    background: var(--primary-color);
    cursor: pointer;
    transition: transform var(--transition-speed-fast) var(--ease-out),
                background-color var(--transition-speed-fast) var(--ease-in-out);
}

input[type="range"]:hover::-webkit-slider-thumb {
    transform: scale(1.1);
}

input[type="range"]:hover::-moz-range-thumb {
    transform: scale(1.1);
}

input[type="range"]:focus-visible {
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    outline-offset: var(--focus-ring-offset);
}

/*------------------------------------------------------------------------------
 * 9. Cards & Content Containers
 *----------------------------------------------------------------------------*/
.card {
    background-color: var(--surface-color);
    border-radius: var(--card-radius);
    padding: var(--space-lg);
    box-shadow: var(--shadow-1);
    transition: box-shadow var(--transition-speed-fast) var(--ease-out),
                transform var(--transition-speed-fast) var(--ease-out);
}

.card:hover {
    box-shadow: var(--shadow-2);
}

.card-interactive {
    cursor: pointer;
}

.card-interactive:hover {
    transform: translateY(-2px);
}

.card-header {
    margin-bottom: var(--space-md);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.card-title {
    font-family: var(--font-headings);
    font-size: var(--font-size-md);
    font-weight: var(--font-weight-semibold);
    margin-bottom: 0;
}

.card-body {
    margin-bottom: var(--space-md);
}

.card-footer {
    border-top: 1px solid var(--border-light);
    padding-top: var(--space-md);
    display: flex;
    justify-content: flex-end;
    gap: var(--space-sm);
}

.recent-tracking {
    margin-top: var(--space-xl);
}

.tracked-items {
    display: flex;
    flex-direction: column;
    gap: var(--space-md);
}

.tracked-item {
    background-color: var(--surface-color);
    border-radius: var(--card-radius);
    padding: var(--space-md);
    box-shadow: var(--shadow-1);
    position: relative;
    transition: box-shadow var(--transition-speed-fast) var(--ease-out);
}

.tracked-item:hover {
    box-shadow: var(--shadow-2);
}

.tracked-item::before {
    content: '';
    position: absolute;
    left: 0;
    top: var(--space-md);
    bottom: var(--space-md);
    width: 3px;
    background-color: var(--primary-color);
    border-radius: 0 2px 2px 0;
}

.tracked-item.feeding::before {
    background-color: var(--primary-color);
}

.tracked-item.diaper::before {
    background-color: var(--secondary-color);
}

.tracked-item.sleep::before {
    background-color: var(--accent-color);
}

.tracked-item.growth::before {
    background-color: var(--danger-color);
}

.tracked-item.health::before {
    background-color: var(--info-color);
}

.tracked-item-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: var(--space-xs);
}

.tracked-title {
    font-weight: var(--font-weight-bold);
}

.tracked-time {
    color: var(--text-secondary);
    font-size: var(--font-size-sm);
}

.tracked-details {
    color: var(--text-color);
    font-size: var(--font-size-base);
}

.tracked-meta {
    margin-top: var(--space-xs);
    color: var(--text-secondary);
    font-size: var(--font-size-sm);
    line-height: var(--line-height-tight);
}

.tracked-actions {
    display: flex;
    justify-content: flex-end;
    margin-top: var(--space-sm);
    gap: var(--space-xs);
}

.btn-tracked {
    background-color: transparent;
    border: none;
    color: var(--primary-color);
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-semibold);
    cursor: pointer;
    padding: var(--space-2xs) var(--space-sm);
    border-radius: var(--border-radius-xl);
    transition: background-color var(--transition-speed-fast) var(--ease-in-out),
                color var(--transition-speed-fast) var(--ease-in-out);
}

.btn-tracked:hover {
    background-color: var(--primary-very-light);
}

.btn-tracked:focus-visible {
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    outline-offset: var(--focus-ring-offset);
}

.btn-tracked.btn-delete {
    color: var(--danger-color);
}

.btn-tracked.btn-delete:hover {
    background-color: var(--danger-light);
    color: white;
}

/*------------------------------------------------------------------------------
 * 10. Buttons & Interactive Elements
 *----------------------------------------------------------------------------*/
.btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: var(--space-sm) var(--space-md);
    background-color: var(--primary-color);
    color: white;
    border: none;
    border-radius: var(--button-radius);
    font-weight: var(--font-weight-semibold);
    cursor: pointer;
    transition: background-color var(--transition-speed-fast) var(--ease-in-out),
                transform var(--transition-speed-fast) var(--ease-in-out),
                box-shadow var(--transition-speed-fast) var(--ease-in-out);
    box-shadow: var(--shadow-1);
    font-family: var(--font-main);
    font-size: var(--font-size-base);
    line-height: var(--line-height-normal);
    white-space: nowrap;
    gap: var(--space-xs);
    user-select: none;
}

.btn:hover {
    background-color: var(--primary-dark);
    box-shadow: var(--shadow-2);
}

.btn:active {
    transform: scale(0.98);
}

.btn:focus-visible {
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    outline-offset: var(--focus-ring-offset);
}

.btn-secondary {
    background-color: var(--surface-color);
    color: var(--text-color);
    border: 1px solid var(--border-color);
}

.btn-secondary:hover {
    background-color: var(--hover-overlay);
    box-shadow: var(--shadow-1);
}

.btn-accent {
    background-color: var(--accent-color);
    color: var(--text-color);
}

.btn-accent:hover {
    background-color: var(--accent-dark);
}

.btn-danger {
    background-color: var(--danger-color);
}

.btn-danger:hover {
    background-color: var(--danger-dark);
}

.btn-sm {
    padding: var(--space-2xs) var(--space-sm);
    font-size: var(--font-size-sm);
}

.btn-lg {
    padding: var(--space-md) var(--space-xl);
    font-size: var(--font-size-md);
}

.btn:disabled,
.btn.disabled {
    opacity: 0.6;
    cursor: not-allowed;
    pointer-events: none;
}

.btn-icon {
    width: 40px;
    height: 40px;
    padding: 0;
    border-radius: 50%;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: var(--font-size-lg);
}

.btn-icon-sm {
    width: 32px;
    height: 32px;
    font-size: var(--font-size-base);
}

.btn-icon-lg {
    width: 48px;
    height: 48px;
    font-size: var(--font-size-xl);
}

.btn-export {
    background-color: var(--accent-color);
    color: var(--text-color);
    border: none;
    border-radius: var(--button-radius);
    padding: var(--space-sm) var(--space-md);
    font-weight: var(--font-weight-semibold);
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: var(--space-xs);
    transition: background-color var(--transition-speed-fast) var(--ease-in-out),
                transform var(--transition-speed-fast) var(--ease-in-out),
                box-shadow var(--transition-speed-fast) var(--ease-in-out);
    margin-top: var(--space-lg);
    box-shadow: var(--shadow-1);
}

.btn-export:hover {
    background-color: var(--accent-light);
    box-shadow: var(--shadow-2);
}

.btn-export:active {
    transform: scale(0.98);
}

.btn-export:focus-visible {
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    outline-offset: var(--focus-ring-offset);
}

/* Floating action button */
.floating-button {
    position: fixed;
    bottom: calc(var(--bottom-nav-height) + var(--space-md));
    right: var(--space-md);
    width: var(--floating-button-size);
    height: var(--floating-button-size);
    border-radius: 50%;
    background-color: var(--primary-color);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: var(--shadow-3);
    cursor: pointer;
    z-index: var(--z-floating-button);
    transition: background-color var(--transition-speed-fast) var(--ease-in-out), 
                transform var(--transition-speed-fast) var(--ease-out),
                box-shadow var(--transition-speed-fast) var(--ease-out);
    font-size: var(--font-size-xl);
}

.floating-button:hover {
    background-color: var(--primary-dark);
    transform: scale(1.05);
    box-shadow: var(--shadow-4);
}

.floating-button:active {
    transform: scale(0.95);
}

.floating-button:focus-visible {
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    outline-offset: var(--focus-ring-offset);
}

/* Theme toggle */
.theme-toggle {
    background-color: var(--surface-color);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-full);
    width: 64px;
    height: 32px;
    padding: 4px;
    position: relative;
    cursor: pointer;
    transition: background-color var(--transition-speed) var(--ease-in-out);
}

.theme-toggle-slider {
    position: absolute;
    left: 4px;
    top: 4px;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    background-color: var(--primary-color);
    transition: transform var(--transition-speed) var(--ease-in-out), 
                background-color var(--transition-speed) var(--ease-in-out);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: var(--font-size-sm);
    box-shadow: var(--shadow-1);
}

.theme-toggle[data-theme="dark"] .theme-toggle-slider {
    transform: translateX(32px);
    background-color: var(--primary-color);
}

.theme-toggle:focus-visible {
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    outline-offset: var(--focus-ring-offset);
}

/*------------------------------------------------------------------------------
 * 11. Trackers & Activity Items
 *----------------------------------------------------------------------------*/
.sleep-timer {
    display: none;
    position: fixed;
    bottom: var(--bottom-nav-height);
    left: 0;
    right: 0;
    background-color: var(--primary-color);
    color: white;
    padding: var(--space-md);
    z-index: var(--z-sticky);
    box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
    animation: slideUpIn var(--transition-speed) var(--ease-out);
}

@keyframes slideUpIn {
    from {
        transform: translateY(100%);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

.sleep-timer.active {
    display: block;
}

.sleep-timer-content {
    display: flex;
    align-items: center;
    justify-content: space-between;
    max-width: var(--content-max-width);
    margin: 0 auto;
}

.sleep-time {
    font-size: var(--font-size-xl);
    font-weight: var(--font-weight-bold);
    font-family: var(--font-mono);
}

.sleep-status {
    font-size: var(--font-size-sm);
    margin-top: 2px;
}

.sleep-actions {
    display: flex;
    gap: var(--space-sm);
}

.sleep-btn {
    background-color: white;
    color: var(--primary-color);
    border: none;
    border-radius: var(--button-radius);
    padding: var(--space-xs) var(--space-md);
    font-weight: var(--font-weight-semibold);
    cursor: pointer;
    transition: background-color var(--transition-speed-fast) var(--ease-in-out), 
                transform var(--transition-speed-fast) var(--ease-in-out);
}

.sleep-btn:hover {
    background-color: var(--primary-very-light);
}

.sleep-btn:active {
    transform: scale(0.98);
}

.sleep-btn:focus-visible {
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    outline-offset: var(--focus-ring-offset);
}

/* Milestone styles */
.milestone-filters {
    background-color: var(--surface-color);
    border-radius: var(--card-radius);
    padding: var(--space-md);
    margin-bottom: var(--space-xl);
    box-shadow: var(--shadow-1);
}

.milestone-info {
    padding: var(--space-md);
    background-color: var(--primary-very-light);
    color: var(--text-color);
    border-radius: var(--input-radius);
    margin-bottom: var(--space-lg);
}

.milestone-list {
    list-style: none;
}

.milestone-age-group {
    margin-bottom: var(--space-xl);
}

.milestone-age-group h4 {
    font-family: var(--font-headings);
    margin-bottom: var(--space-sm);
    padding-bottom: var(--space-xs);
    border-bottom: 1px solid var(--border-color);
}

.milestone-age-group ul {
    list-style: none;
    display: flex;
    flex-direction: column;
    gap: var(--space-sm);
}

.milestone {
    display: flex;
    align-items: center;
    background-color: var(--surface-color);
    border-radius: var(--input-radius);
    padding: var(--space-sm);
    transition: transform var(--transition-speed-fast) var(--ease-out),
                box-shadow var(--transition-speed-fast) var(--ease-out);
    box-shadow: var(--shadow-1);
}

.milestone:hover {
    transform: translateX(var(--space-2xs));
    box-shadow: var(--shadow-2);
}

.milestone.completed {
    background-color: var(--secondary-light);
    color: white;
}

.milestone-dot, .milestone-check {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: var(--space-sm);
    flex-shrink: 0;
}

.milestone-dot {
    background-color: var(--primary-very-light);
    border: 2px solid var(--primary-color);
}

.milestone-check {
    background-color: var(--accent-color);
    color: white;
    font-size: var(--font-size-sm);
}

.milestone-details {
    flex: 1;
}

.milestone-details span {
    display: block;
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    margin-top: 2px;
}

.completed .milestone-details span {
    color: rgba(255, 255, 255, 0.8);
}

.mark-complete {
    background-color: var(--primary-color);
    color: white;
    border: none;
    border-radius: var(--border-radius-xl);
    padding: var(--space-2xs) var(--space-sm);
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-semibold);
    cursor: pointer;
    transition: background-color var(--transition-speed-fast) var(--ease-in-out),
                transform var(--transition-speed-fast) var(--ease-in-out);
}

.mark-complete:hover {
    background-color: var(--primary-dark);
}

.mark-complete:active {
    transform: scale(0.98);
}

.mark-complete:focus-visible {
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    outline-offset: var(--focus-ring-offset);
}

.no-milestones {
    padding: var(--space-lg);
    text-align: center;
    color: var(--text-secondary);
}

/*------------------------------------------------------------------------------
 * 12. Charts & Data Visualization
 *----------------------------------------------------------------------------*/
.chart-container {
    position: relative;
    margin-top: var(--space-md);
    height: 200px;
    width: 100%;
    background-color: var(--background-color);
    border-radius: var(--input-radius);
    overflow: hidden;
}

.chart-legend {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-sm);
    margin-top: var(--space-sm);
    justify-content: center;
}

.legend-item {
    display: flex;
    align-items: center;
    gap: var(--space-2xs);
    font-size: var(--font-size-sm);
}

.legend-color {
    width: 12px;
    height: 12px;
    border-radius: 2px;
}

.stat-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    gap: var(--space-md);
    margin-bottom: var(--space-lg);
}

.stat-card {
    background-color: var(--surface-color);
    border-radius: var(--card-radius);
    padding: var(--space-md);
    text-align: center;
    box-shadow: var(--shadow-1);
    transition: transform var(--transition-speed-fast) var(--ease-out),
                box-shadow var(--transition-speed-fast) var(--ease-out);
}

.stat-card:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-2);
}

.stat-value {
    font-size: var(--font-size-xl);
    font-weight: var(--font-weight-bold);
    color: var(--primary-color);
}

.stat-label {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
    margin-top: var(--space-2xs);
}

.report-filters {
    background-color: var(--surface-color);
    border-radius: var(--card-radius);
    padding: var(--space-md);
    margin-bottom: var(--space-xl);
    box-shadow: var(--shadow-1);
}

.filter-row {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-sm);
    align-items: center;
}

.filter-group {
    flex: 1;
    min-width: 140px;
}

.filter-label {
    font-weight: var(--font-weight-semibold);
    margin-bottom: var(--space-xs);
    display: block;
}

.report-section {
    background-color: var(--surface-color);
    border-radius: var(--card-radius);
    padding: var(--space-lg);
    margin-bottom: var(--space-xl);
    box-shadow: var(--shadow-1);
}

.report-title {
    font-family: var(--font-headings);
    font-size: var(--font-size-md);
    font-weight: var(--font-weight-semibold);
    margin-bottom: var(--space-md);
}

.report-stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    gap: var(--space-md);
    margin-bottom: var(--space-lg);
}

.stat-item {
    background-color: var(--background-color);
    border-radius: var(--input-radius);
    padding: var(--space-md);
    text-align: center;
    transition: transform var(--transition-speed-fast) var(--ease-out),
                box-shadow var(--transition-speed-fast) var(--ease-out);
}

.stat-item:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-1);
}

/*------------------------------------------------------------------------------
 * 13. Milestone Components 
 *----------------------------------------------------------------------------*/
/* Additional milestone styles are in section 11 */

.milestone-progress {
    margin-bottom: var(--space-lg);
}

.progress-container {
    width: 100%;
    height: 8px;
    background-color: var(--surface-low);
    border-radius: var(--border-radius-full);
    overflow: hidden;
    margin-bottom: var(--space-sm);
}

.progress-bar {
    height: 100%;
    background-color: var(--primary-color);
    border-radius: var(--border-radius-full);
    transition: width 0.5s var(--ease-out);
}

.progress-stats {
    display: flex;
    justify-content: space-between;
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
}

.milestone-category-tabs {
    display: flex;
    overflow-x: auto;
    margin-bottom: var(--space-md);
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
    gap: var(--space-2xs);
}

.milestone-category-tabs::-webkit-scrollbar {
    display: none;
}

.milestone-category-tab {
    padding: var(--space-xs) var(--space-sm);
    background: transparent;
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-xl);
    color: var(--text-secondary);
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-semibold);
    cursor: pointer;
    transition: background-color var(--transition-speed-fast) var(--ease-in-out),
                color var(--transition-speed-fast) var(--ease-in-out),
                border-color var(--transition-speed-fast) var(--ease-in-out);
    white-space: nowrap;
}

.milestone-category-tab.active {
    background-color: var(--primary-color);
    color: white;
    border-color: var(--primary-color);
}

.milestone-category-tab:not(.active):hover {
    background-color: var(--hover-overlay);
}

.milestone-category-tab:focus-visible {
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    outline-offset: var(--focus-ring-offset);
}

/*------------------------------------------------------------------------------
 * 14. Report Components
 *----------------------------------------------------------------------------*/
/* Additional report styles are in section 12 */

.summary-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

.summary-list li {
    padding: var(--space-sm);
    border-bottom: 1px solid var(--border-light);
    display: flex;
    align-items: center;
    gap: var(--space-sm);
}

.summary-list li:last-child {
    border-bottom: none;
}

.summary-icon {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background-color: var(--primary-very-light);
    color: var(--primary-color);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.summary-content {
    flex: 1;
}

.pattern-group {
    margin-bottom: var(--space-lg);
}

.pattern-group:last-child {
    margin-bottom: 0;
}

.pattern-group h5 {
    font-family: var(--font-headings);
    margin-bottom: var(--space-sm);
    color: var(--primary-color);
}

.pattern-item {
    padding: var(--space-sm);
    background-color: var(--background-color);
    border-radius: var(--input-radius);
    margin-bottom: var(--space-xs);
}

.pattern-item:last-child {
    margin-bottom: 0;
}

/*------------------------------------------------------------------------------
 * 15. Modal & Dialog Elements
 *----------------------------------------------------------------------------*/
.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: var(--modal-overlay);
    z-index: var(--z-modal);
    align-items: flex-end;
    justify-content: center;
    padding: var(--space-md);
    overflow-y: auto;
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
}

.modal.centered {
    align-items: center;
}

.modal-content {
    background-color: var(--background-color);
    border-radius: var(--card-radius) var(--card-radius) 0 0;
    width: 100%;
    max-width: 500px;
    max-height: 80vh;
    overflow-y: auto;
    animation: slideUp var(--transition-speed) var(--ease-out);
    position: relative;
    box-shadow: var(--shadow-3);
}

.centered .modal-content {
    border-radius: var(--card-radius);
}

@keyframes slideUp {
    from {
        transform: translateY(100%);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

.modal-header {
    padding: var(--space-md) var(--space-lg);
    border-bottom: 1px solid var(--border-color);
    display: flex;
    align-items: center;
    justify-content: space-between;
    position: sticky;
    top: 0;
    background-color: var(--background-color);
    z-index: 1;
}

.modal-title {
    font-family: var(--font-headings);
    font-size: var(--font-size-md);
    font-weight: var(--font-weight-semibold);
    margin-bottom: 0;
}

.modal-close {
    background: transparent;
    border: none;
    cursor: pointer;
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-secondary);
    font-size: var(--font-size-lg);
    border-radius: 50%;
    transition: background-color var(--transition-speed-fast) var(--ease-in-out),
                color var(--transition-speed-fast) var(--ease-in-out);
}

.modal-close:hover {
    background-color: var(--hover-overlay);
    color: var(--text-color);
}

.modal-close:focus-visible {
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    outline-offset: var(--focus-ring-offset);
}

.modal-body {
    padding: var(--space-lg);
}

.modal-actions {
    padding: var(--space-md) var(--space-lg);
    border-top: 1px solid var(--border-color);
    display: flex;
    justify-content: flex-end;
    gap: var(--space-md);
    position: sticky;
    bottom: 0;
    background-color: var(--background-color);
}

.modal-btn {
    padding: var(--space-sm) var(--space-lg);
    border-radius: var(--button-radius);
    font-weight: var(--font-weight-semibold);
    cursor: pointer;
    transition: background-color var(--transition-speed-fast) var(--ease-in-out),
                transform var(--transition-speed-fast) var(--ease-in-out);
}

.modal-btn-secondary {
    background-color: transparent;
    border: 1px solid var(--border-color);
    color: var(--text-color);
}

.modal-btn-secondary:hover {
    background-color: var(--hover-overlay);
}

.modal-btn-primary {
    background-color: var(--primary-color);
    color: white;
    border: none;
}

.modal-btn-primary:hover {
    background-color: var(--primary-dark);
}

.modal-btn:active {
    transform: scale(0.98);
}

.modal-btn:focus-visible {
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    outline-offset: var(--focus-ring-offset);
}

/*------------------------------------------------------------------------------
 * 16. Notifications & Alerts
 *----------------------------------------------------------------------------*/
.toast-container {
    position: fixed;
    top: var(--space-md);
    right: var(--space-md);
    z-index: var(--z-toast);
    display: flex;
    flex-direction: column;
    gap: var(--space-xs);
    max-width: 300px;
    pointer-events: none;
}

.toast {
    background-color: var(--surface-high);
    border-left: 4px solid var(--primary-color);
    border-radius: var(--input-radius);
    padding: var(--space-md);
    box-shadow: var(--shadow-2);
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    animation: slideIn var(--transition-speed) var(--ease-out), 
               fadeOut var(--transition-speed) var(--ease-in) 2.7s;
    opacity: 0;
    transform: translateX(100%);
    pointer-events: auto;
}

.toast.active {
    opacity: 1;
    transform: translateX(0);
}

.toast.success {
    border-left-color: var(--secondary-color);
}

.toast.success .toast-icon {
    color: var(--secondary-color);
}

.toast.warning {
    border-left-color: var(--accent-color);
}

.toast.warning .toast-icon {
    color: var(--accent-color);
}

.toast.error {
    border-left-color: var(--danger-color);
}

.toast.error .toast-icon {
    color: var(--danger-color);
}

@keyframes slideIn {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

@keyframes fadeOut {
    from {
        opacity: 1;
    }
    to {
        opacity: 0;
    }
}

.toast-icon {
    color: var(--primary-color);
    font-size: var(--font-size-lg);
}

.toast-message {
    flex: 1;
    font-size: var(--font-size-sm);
}

.toast-close {
    background: transparent;
    border: none;
    cursor: pointer;
    color: var(--text-secondary);
    font-size: var(--font-size-md);
    display: flex;
    align-items: center;
    justify-content: center;
    padding: var(--space-2xs);
    border-radius: 50%;
    transition: background-color var(--transition-speed-fast) var(--ease-in-out),
                color var(--transition-speed-fast) var(--ease-in-out);
}

.toast-close:hover {
    background-color: var(--hover-overlay);
    color: var(--text-color);
}

.toast-close:focus-visible {
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    outline-offset: var(--focus-ring-offset);
}

/* Alarm notification */
.alarm-notification {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: var(--modal-overlay);
    z-index: var(--z-alarming);
    align-items: center;
    justify-content: center;
    padding: var(--space-md);
    animation: fadeIn var(--transition-speed) var(--ease-out);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
}

@keyframes fadeIn {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

.alarm-content {
    background-color: var(--danger-color);
    color: white;
    border-radius: var(--card-radius);
    padding: var(--space-xl);
    max-width: 400px;
    width: 100%;
    text-align: center;
    animation: pulse 1.5s infinite;
    box-shadow: var(--shadow-4),
                0 0 0 10px rgba(234, 67, 53, 0.2),
                0 0 0 20px rgba(234, 67, 53, 0.1);
}

@keyframes pulse {
    0% {
        transform: scale(1);
        box-shadow: var(--shadow-4),
                    0 0 0 10px rgba(234, 67, 53, 0.2),
                    0 0 0 20px rgba(234, 67, 53, 0.1);
    }
    50% {
        transform: scale(1.05);
        box-shadow: var(--shadow-4),
                    0 0 0 15px rgba(234, 67, 53, 0.2),
                    0 0 0 25px rgba(234, 67, 53, 0.1);
    }
    100% {
        transform: scale(1);
        box-shadow: var(--shadow-4),
                    0 0 0 10px rgba(234, 67, 53, 0.2),
                    0 0 0 20px rgba(234, 67, 53, 0.1);
    }
}

.alarm-title {
    font-size: var(--font-size-xl);
    font-weight: var(--font-weight-bold);
    margin-bottom: var(--space-md);
}

.alarm-message {
    font-size: var(--font-size-md);
    margin-bottom: var(--space-xl);
}

.alarm-actions {
    display: flex;
    flex-direction: column;
    gap: var(--space-sm);
}

.alarm-btn {
    background-color: white;
    color: var(--danger-color);
    border: none;
    border-radius: var(--button-radius);
    padding: var(--space-sm) var(--space-xl);
    font-weight: var(--font-weight-bold);
    cursor: pointer;
    transition: background-color var(--transition-speed-fast) var(--ease-in-out),
                transform var(--transition-speed-fast) var(--ease-in-out);
}

.alarm-btn:hover {
    background-color: var(--primary-very-light);
}

.alarm-btn:active {
    transform: scale(0.98);
}

.alarm-btn:focus-visible {
    outline: var(--focus-ring-width) solid rgba(255, 255, 255, 0.5);
    outline-offset: var(--focus-ring-offset);
}

.snooze-options {
    display: flex;
    gap: var(--space-sm);
    justify-content: center;
    margin-top: var(--space-sm);
}

.snooze-option {
    background-color: transparent;
    border: 1px solid white;
    color: white;
    border-radius: var(--input-radius);
    padding: var(--space-xs) var(--space-md);
    cursor: pointer;
    transition: background-color var(--transition-speed-fast) var(--ease-in-out),
                transform var(--transition-speed-fast) var(--ease-in-out);
}

.snooze-option:hover {
    background-color: rgba(255, 255, 255, 0.2);
}

.snooze-option:active {
    transform: scale(0.98);
}

.snooze-option:focus-visible {
    outline: var(--focus-ring-width) solid rgba(255, 255, 255, 0.5);
    outline-offset: var(--focus-ring-offset);
}

/* Alert and message boxes */
.alert {
    padding: var(--space-md);
    border-radius: var(--input-radius);
    margin-bottom: var(--space-md);
    display: flex;
    align-items: flex-start;
    gap: var(--space-sm);
}

.alert-icon {
    font-size: var(--font-size-lg);
    flex-shrink: 0;
    margin-top: 2px;
}

.alert-content {
    flex: 1;
}

.alert-title {
    font-weight: var(--font-weight-semibold);
    margin-bottom: var(--space-2xs);
}

.alert-message {
    font-size: var(--font-size-sm);
}

.alert-info {
    background-color: var(--primary-very-light);
    color: var(--primary-dark);
}

.alert-success {
    background-color: var(--secondary-transparent);
    color: var(--secondary-dark);
}

.alert-warning {
    background-color: var(--accent-transparent);
    color: var(--accent-dark);
}

.alert-danger {
    background-color: var(--danger-transparent);
    color: var(--danger-dark);
}

/*------------------------------------------------------------------------------
 * 17. Utilities & Helper Classes
 *----------------------------------------------------------------------------*/
.hidden {
    display: none !important;
}

.sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
}

.mt-xs { margin-top: var(--space-xs); }
.mt-sm { margin-top: var(--space-sm); }
.mt-md { margin-top: var(--space-md); }
.mt-lg { margin-top: var(--space-lg); }
.mt-xl { margin-top: var(--space-xl); }

.mb-xs { margin-bottom: var(--space-xs); }
.mb-sm { margin-bottom: var(--space-sm); }
.mb-md { margin-bottom: var(--space-md); }
.mb-lg { margin-bottom: var(--space-lg); }
.mb-xl { margin-bottom: var(--space-xl); }

.mx-auto {
    margin-left: auto;
    margin-right: auto;
}

.w-full { width: 100%; }
.w-auto { width: auto; }
.h-full { height: 100%; }
.h-auto { height: auto; }

.rounded { border-radius: var(--input-radius); }
.rounded-lg { border-radius: var(--card-radius); }
.rounded-full { border-radius: 9999px; }

.shadow { box-shadow: var(--shadow-1); }
.shadow-md { box-shadow: var(--shadow-2); }
.shadow-lg { box-shadow: var(--shadow-3); }
.shadow-xl { box-shadow: var(--shadow-4); }

.bg-primary { background-color: var(--primary-color); }
.bg-secondary { background-color: var(--secondary-color); }
.bg-accent { background-color: var(--accent-color); }
.bg-danger { background-color: var(--danger-color); }
.bg-surface { background-color: var(--surface-color); }
.bg-background { background-color: var(--background-color); }

.pointer { cursor: pointer; }
.no-events { pointer-events: none; }

.overflow-hidden { overflow: hidden; }
.overflow-auto { overflow: auto; }
.overflow-scroll { overflow: scroll; }

.relative { position: relative; }
.absolute { position: absolute; }
.fixed { position: fixed; }
.sticky { position: sticky; }

.inset-0 {
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
}

.opacity-0 { opacity: 0; }
.opacity-50 { opacity: 0.5; }
.opacity-75 { opacity: 0.75; }
.opacity-100 { opacity: 1; }

/* Loading spinner */
.loading-spinner {
    display: inline-block;
    width: 20px;
    height: 20px;
    border: 3px solid rgba(255, 255, 255, 0.3);
    border-radius: 50%;
    border-top-color: white;
    animation: spin 1s linear infinite;
    margin-right: var(--space-xs);
}

.loading-spinner.dark {
    border: 3px solid rgba(0, 0, 0, 0.1);
    border-top-color: var(--primary-color);
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

/* Shimmer loading effect */
.shimmer {
    background: linear-gradient(
        90deg,
        var(--surface-color) 0%,
        var(--surface-high) 50%,
        var(--surface-color) 100%
    );
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
}

@keyframes shimmer {
    0% {
        background-position: -200% 0;
    }
    100% {
        background-position: 200% 0;
    }
}

/* Badge */
.badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 2px 8px;
    border-radius: var(--border-radius-full);
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-semibold);
}

.badge-primary {
    background-color: var(--primary-color);
    color: white;
}

.badge-secondary {
    background-color: var(--secondary-color);
    color: white;
}

.badge-accent {
    background-color: var(--accent-color);
    color: var(--text-color);
}

.badge-danger {
    background-color: var(--danger-color);
    color: white;
}

.badge-outline {
    background-color: transparent;
    border: 1px solid var(--border-color);
    color: var(--text-color);
}

/*------------------------------------------------------------------------------
 * 18. Animations & Transitions
 *----------------------------------------------------------------------------*/
.fade-in {
    animation: fadeIn var(--transition-speed) var(--ease-out);
}

.fade-out {
    animation: fadeOut var(--transition-speed) var(--ease-in);
}

.slide-up {
    animation: slideUp var(--transition-speed) var(--ease-out);
}

.slide-down {
    animation: slideDown var(--transition-speed) var(--ease-out);
}

.slide-in-right {
    animation: slideInRight var(--transition-speed) var(--ease-out);
}

.slide-out-right {
    animation: slideOutRight var(--transition-speed) var(--ease-in);
}

@keyframes slideDown {
    from {
        transform: translateY(-100%);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

@keyframes slideInRight {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

@keyframes slideOutRight {
    from {
        transform: translateX(0);
        opacity: 1;
    }
    to {
        transform: translateX(100%);
        opacity: 0;
    }
}

/* Scale Animations */
.scale-in {
    animation: scaleIn var(--transition-speed) var(--ease-bounce);
}

.scale-out {
    animation: scaleOut var(--transition-speed) var(--ease-in);
}

@keyframes scaleIn {
    from {
        transform: scale(0.8);
        opacity: 0;
    }
    to {
        transform: scale(1);
        opacity: 1;
    }
}

@keyframes scaleOut {
    from {
        transform: scale(1);
        opacity: 1;
    }
    to {
        transform: scale(0.8);
        opacity: 0;
    }
}

/* Attention Grabbing Animations */
.shake {
    animation: shake 0.82s cubic-bezier(.36,.07,.19,.97) both;
}

@keyframes shake {
    10%, 90% { transform: translate3d(-1px, 0, 0); }
    20%, 80% { transform: translate3d(2px, 0, 0); }
    30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
    40%, 60% { transform: translate3d(4px, 0, 0); }
}

.pulse {
    animation: simplePulse 2s infinite;
}

@keyframes simplePulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
}

.bounce {
    animation: bounce 1s infinite;
}

@keyframes bounce {
    0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
    40% { transform: translateY(-10px); }
    60% { transform: translateY(-5px); }
}

/*------------------------------------------------------------------------------
 * 19. Media Queries
 *----------------------------------------------------------------------------*/
/* Small screens (mobile) */
@media (max-width: 480px) {
    :root {
        --side-padding: 12px;
        --form-padding: 16px;
    }
    
    .nav-button-label {
        font-size: var(--font-size-2xs);
    }
    
    .app-header {
        padding: 0 var(--side-padding);
    }
    
    .content-area {
        padding: var(--space-sm) var(--side-padding);
    }
    
    .dashboard-summary {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .form-grid {
        grid-template-columns: 1fr;
    }
    
    .filter-row {
        flex-direction: column;
        align-items: stretch;
    }
    
    .filter-group {
        width: 100%;
    }
    
    .settings-item {
        flex-direction: column;
        align-items: flex-start;
        gap: var(--space-sm);
    }
    
    .settings-actions {
        width: 100%;
        justify-content: flex-end;
    }
    
    .modal-actions {
        flex-direction: column-reverse;
        gap: var(--space-sm);
    }
    
    .modal-btn {
        width: 100%;
    }
    
    .toast-container {
        left: var(--side-padding);
        right: var(--side-padding);
        max-width: none;
    }
}

/* Medium screens (tablets) */
@media (min-width: 481px) and (max-width: 768px) {
    .dashboard-summary {
        grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    }
}

/* Large screens (desktops) */
@media (min-width: 769px) {
    :root {
        --side-padding: 24px;
        --form-padding: 24px;
    }
    
    .dashboard-summary {
        grid-template-columns: repeat(4, 1fr);
    }
    
    .form-grid {
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    }
    
    .report-stats {
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    }
    
    .modal-content {
        border-radius: var(--card-radius);
        max-height: 90vh;
    }
    
    .modal {
        align-items: center;
    }
    
    .summary-card {
        transition: transform var(--transition-speed) var(--ease-out), 
                    box-shadow var(--transition-speed) var(--ease-out);
    }
    
    .summary-card:hover {
        transform: translateY(-4px);
        box-shadow: var(--shadow-3);
    }
    
    .nav-button {
        gap: var(--space-xs);
    }
    
    .nav-button-label {
        font-size: var(--font-size-xs);
    }
}

/* Extra large screens */
@media (min-width: 1280px) {
    :root {
        --side-padding: 32px;
    }
    
    .content-area {
        padding: var(--space-lg) var(--side-padding);
    }
    
    .dashboard-sections {
        display: grid;
        grid-template-columns: 2fr 1fr;
        grid-template-rows: auto 1fr;
        gap: var(--space-lg);
    }
    
    .dashboard-section:first-child {
        grid-column: 1 / 2;
        grid-row: 1 / 3;
    }
    
    .dashboard-summary {
        grid-template-columns: repeat(4, 1fr);
    }
}

/* High pixel density screens */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
    :root {
        --shadow-1: 0 0.5px 1px rgba(0, 0, 0, 0.07), 0 1px 2px rgba(0, 0, 0, 0.07);
        --shadow-2: 0 1px 2px rgba(0, 0, 0, 0.07), 0 2px 4px rgba(0, 0, 0, 0.07);
        --shadow-3: 0 2px 4px rgba(0, 0, 0, 0.07), 0 4px 8px rgba(0, 0, 0, 0.07);
        --shadow-4: 0 4px 8px rgba(0, 0, 0, 0.07), 0 8px 16px rgba(0, 0, 0, 0.07);
    }
}

/* Landscape mode for mobile */
@media (max-height: 480px) and (orientation: landscape) {
    .bottom-navigation {
        height: 56px;
    }
    
    .nav-button-icon {
        font-size: var(--font-size-lg);
    }
    
    .nav-button-label {
        font-size: var(--font-size-2xs);
    }
    
    .main-container {
        padding-bottom: 56px;
    }
    
    .floating-button {
        bottom: calc(56px + var(--space-md));
        width: 48px;
        height: 48px;
    }
}

/* Media query for users who prefer reduced motion */
@media (prefers-reduced-motion: reduce) {
    *, *::before, *::after {
        animation-duration: 0.001ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.001ms !important;
        scroll-behavior: auto !important;
    }
}

/*------------------------------------------------------------------------------
 * 20. Print Styles
 *----------------------------------------------------------------------------*/
@media print {
    @page {
        margin: 1cm;
    }
    
    body {
        background-color: white;
        color: black;
        font-size: 12pt;
    }
    
    .app-header,
    .bottom-navigation,
    .floating-button,
    .toast-container,
    .alarm-notification,
    .sleep-timer,
    .track-tabs,
    .btn-submit-container,
    .track-form-container,
    .tracked-actions,
    .btn-export,
    .modal {
        display: none !important;
    }
    
    .content-area {
        padding: 0;
        max-width: 100%;
    }
    
    .main-container {
        padding-bottom: 0;
        overflow: visible;
    }
    
    .dashboard-section,
    .report-section,
    .card,
    .tracked-item,
    .milestone {
        page-break-inside: avoid;
        break-inside: avoid;
        border: 1px solid #ddd;
        box-shadow: none !important;
    }
    
    .dashboard-summary {
        display: flex;
        flex-wrap: wrap;
    }
    
    .summary-card {
        width: 50%;
        box-shadow: none;
        border: 1px solid #ddd;
    }
    
    a {
        text-decoration: underline;
        color: #000;
    }
    
    h1, h2, h3, h4, h5, h6 {
        page-break-after: avoid;
        page-break-inside: avoid;
    }
    
    img {
        max-width: 100% !important;
    }
    
    p, h2, h3 {
        orphans: 3;
        widows: 3;
    }
    
    .chart-container {
        height: auto;
        max-height: 300px;
    }
    
    /* Print header */
    .main-container::before {
        content: "Baby Tracker Pro - Report";
        display: block;
        font-size: 24pt;
        font-weight: bold;
        margin-bottom: 20pt;
        text-align: center;
    }
    
    .tab-content {
        display: block !important;
        opacity: 1 !important;
        transform: none !important;
    }
    
    /* Force background colors to print in modern browsers */
    * {
        -webkit-print-color-adjust: exact !important;
        print-color-adjust: exact !important;
    }
}

/*------------------------------------------------------------------------------
 * 21. Dark Mode Overrides
 *----------------------------------------------------------------------------*/
[data-theme="dark"] .card-value {
    color: var(--text-color);
}

[data-theme="dark"] .toast {
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.25);
}

[data-theme="dark"] .alert-info {
    background-color: var(--primary-transparent);
    color: var(--primary-light);
}

[data-theme="dark"] .alert-success {
    background-color: var(--secondary-transparent);
    color: var(--secondary-light);
}

[data-theme="dark"] .alert-warning {
    background-color: var(--accent-transparent);
    color: var(--accent-light);
}

[data-theme="dark"] .alert-danger {
    background-color: var(--danger-transparent);
    color: var(--danger-light);
}

[data-theme="dark"] .milestone-info {
    background-color: var(--primary-transparent);
}

[data-theme="dark"] .btn-section:hover {
    background-color: var(--primary-transparent);
}

[data-theme="dark"] .btn-tracked:hover {
    background-color: var(--primary-transparent);
}

[data-theme="dark"] .btn-tracked.btn-delete:hover {
    background-color: var(--danger-color);
}

[data-theme="dark"] .shimmer {
    background: linear-gradient(
        90deg,
        var(--surface-color) 0%,
        var(--surface-high) 50%,
        var(--surface-color) 100%
    );
}

/* Add dark mode support for certain browsers */
@media (prefers-color-scheme: dark) {
    :root:not([data-theme="light"]) {
        --primary-color: hsl(var(--primary-hue), 92%, 76%);
        --primary-dark: hsl(var(--primary-hue), 72%, 69%);
        --primary-light: hsl(var(--primary-hue), 95%, 83%);
        --primary-very-light: hsl(var(--primary-hue), 15%, 20%);
        --primary-transparent: hsla(var(--primary-hue), 92%, 76%, 0.1);
        
        --secondary-color: hsl(var(--secondary-hue), 50%, 70%);
        --secondary-light: hsl(var(--secondary-hue), 35%, 45%);
        --secondary-dark: hsl(var(--secondary-hue), 60%, 60%);
        --secondary-transparent: hsla(var(--secondary-hue), 50%, 70%, 0.1);
        
        --accent-color: hsl(var(--accent-hue), 80%, 62%);
        --accent-light: hsl(var(--accent-hue), 70%, 40%);
        --accent-dark: hsl(var(--accent-hue), 90%, 70%);
        --accent-transparent: hsla(var(--accent-hue), 80%, 62%, 0.1);
        
        --danger-color: hsl(var(--danger-hue), 81%, 72%);
        --danger-light: hsl(var(--danger-hue), 61%, 56%);
        --danger-dark: hsl(var(--danger-hue), 90%, 80%);
        --danger-transparent: hsla(var(--danger-hue), 81%, 72%, 0.1);
        
        --text-color: hsl(210, 17%, 92%);
        --text-secondary: hsl(210, 9%, 70%);
        --text-tertiary: hsl(210, 7%, 60%);
        --text-disabled: hsl(210, 5%, 45%);
        --background-color: hsl(223, 6%, 13%);
        --surface-color: hsl(223, 4%, 16%);
        --surface-high: hsl(223, 4%, 19%);
        --surface-low: hsl(223, 4%, 11%);
        --border-color: hsl(223, 4%, 25%);
        --border-light: hsl(223, 4%, 20%);
        
        --shadow-ambient: 0 1px 3px rgba(0, 0, 0, 0.25);
        --shadow-1: 0 1px 2px rgba(0, 0, 0, 0.2), 0 2px 4px rgba(0, 0, 0, 0.2);
        --shadow-2: 0 2px 4px rgba(0, 0, 0, 0.2), 0 4px 8px rgba(0, 0, 0, 0.2);
        --shadow-3: 0 4px 8px rgba(0, 0, 0, 0.2), 0 8px 16px rgba(0, 0, 0, 0.2);
        --shadow-4: 0 8px 16px rgba(0, 0, 0, 0.2), 0 16px 32px rgba(0, 0, 0, 0.2);
        --shadow-inset: inset 0 2px 4px rgba(0, 0, 0, 0.15);
        
        --hover-overlay: rgba(255, 255, 255, 0.05);
        --active-overlay: rgba(255, 255, 255, 0.1);
        --disabled-overlay: rgba(255, 255, 255, 0.05);
        --modal-overlay: rgba(0, 0, 0, 0.7);
        
        --focus-ring-color: rgba(138, 180, 248, 0.5);
    }
}

/* Mixin-like classes for consistent behavior */
.focus-ring:focus-visible {
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    outline-offset: var(--focus-ring-offset);
}

.transition-all {
    transition: all var(--transition-speed) var(--ease-in-out);
}

.transition-transform {
    transition: transform var(--transition-speed) var(--ease-out);
}

.transition-colors {
    transition: background-color var(--transition-speed-fast) var(--ease-in-out),
                color var(--transition-speed-fast) var(--ease-in-out),
                border-color var(--transition-speed-fast) var(--ease-in-out);
}

/* Accessibility enhancements */
input:focus-visible,
select:focus-visible,
textarea:focus-visible,
button:focus-visible {
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    outline-offset: var(--focus-ring-offset);
}

@media (forced-colors: active) {
    .btn,
    .input-field,
    .btn-submit,
    .btn-section,
    .btn-tracked,
    .modal-btn,
    .alarm-btn,
    .toast,
    .toggle-option,
    .card,
    .dashboard-section,
    .report-section,
    .tracked-item,
    .milestone,
    .summary-card {
        border: 1px solid;
    }
    
    .nav-button-icon,
    .floating-button,
    .theme-toggle-slider,
    .toast-icon,
    .milestone-check,
    .milestone-dot {
        forced-color-adjust: none;
    }
}

/* RTL (Right-to-Left) support */
[dir="rtl"] .toast {
    left: var(--space-md);
    right: auto;
    border-left: none;
    border-right: 4px solid var(--primary-color);
}

[dir="rtl"] .toast.success {
    border-right-color: var(--secondary-color);
}

[dir="rtl"] .toast.warning {
    border-right-color: var(--accent-color);
}

[dir="rtl"] .toast.error {
    border-right-color: var(--danger-color);
}

[dir="rtl"] .track-tabs,
[dir="rtl"] .filter-row,
[dir="rtl"] .header-actions,
[dir="rtl"] .section-actions {
    direction: rtl;
}

[dir="rtl"] .nav-button::after {
    left: auto;
    right: 50%;
}

[dir="rtl"] .nav-button.active::after {
    right: 30%;
}

[dir="rtl"] .floating-button {
    right: auto;
    left: var(--space-md);
}

[dir="rtl"] .toast-container {
    right: auto;
    left: var(--space-md);
}

[dir="rtl"] .tracked-item::before {
    left: auto;
    right: 0;
    border-radius: 2px 0 0 2px;
}

[dir="rtl"] .upcoming-item::before {
    left: auto;
    right: 0;
    border-radius: 0 4px 4px 0;
}

/* Advanced chart styling */
.chart-tooltip {
    background-color: var(--surface-high);
    border-radius: var(--input-radius);
    padding: var(--space-sm);
    box-shadow: var(--shadow-2);
    font-size: var(--font-size-sm);
    pointer-events: none;
    z-index: 10;
    position: absolute;
    transform: translate(-50%, -100%);
    margin-top: -8px;
    min-width: 120px;
    border: 1px solid var(--border-color);
}

.chart-tooltip::after {
    content: '';
    position: absolute;
    bottom: -5px;
    left: 50%;
    transform: translateX(-50%);
    width: 0;
    height: 0;
    border-left: 5px solid transparent;
    border-right: 5px solid transparent;
    border-top: 5px solid var(--surface-high);
}

.chart-axis {
    stroke: var(--border-color);
    stroke-width: 1;
}

.chart-grid {
    stroke: var(--border-light);
    stroke-width: 0.5;
    stroke-dasharray: 4 4;
}

.chart-label {
    fill: var(--text-secondary);
    font-size: var(--font-size-xs);
    font-family: var(--font-main);
}

.chart-line {
    fill: none;
    stroke-width: 2;
    stroke-linecap: round;
    stroke-linejoin: round;
}

.chart-area {
    opacity: 0.2;
}

.chart-point {
    fill: var(--background-color);
    stroke-width: 2;
    transition: r 0.2s var(--ease-out);
}

.chart-point:hover {
    r: 6;
}

.chart-line.feeding-line {
    stroke: var(--primary-color);
}

.chart-area.feeding-area {
    fill: var(--primary-color);
}

.chart-line.diaper-line {
    stroke: var(--secondary-color);
}

.chart-area.diaper-area {
    fill: var(--secondary-color);
}

.chart-line.sleep-line {
    stroke: var(--accent-color);
}

.chart-area.sleep-area {
    fill: var(--accent-color);
}

.chart-line.growth-line {
    stroke: var(--danger-color);
}

.chart-area.growth-area {
    fill: var(--danger-color);
}

/* Enhanced range input for touch devices */
@media (pointer: coarse) {
    input[type="range"]::-webkit-slider-thumb {
        width: 24px;
        height: 24px;
    }
    
    input[type="range"]::-moz-range-thumb {
        width: 24px;
        height: 24px;
    }
    
    .floating-button {
        width: 64px;
        height: 64px;
        font-size: 28px;
    }
}

/* Device-specific optimizations */
/* iPhone X, 11, 12, 13 notch support */
@supports (padding-top: env(safe-area-inset-top)) {
    .app-header {
        padding-top: env(safe-area-inset-top);
        height: calc(var(--header-height) + env(safe-area-inset-top));
    }
    
    .main-container {
        padding-top: env(safe-area-inset-top);
    }
    
    .bottom-navigation {
        padding-bottom: env(safe-area-inset-bottom);
        height: calc(var(--bottom-nav-height) + env(safe-area-inset-bottom));
    }
    
    .floating-button {
        bottom: calc(var(--bottom-nav-height) + var(--space-md) + env(safe-area-inset-bottom));
    }
    
    .sleep-timer {
        bottom: calc(var(--bottom-nav-height) + env(safe-area-inset-bottom));
    }
}

/* Blurred backdrop support when background elements are visible */
@supports (backdrop-filter: blur()) or (-webkit-backdrop-filter: blur()) {
    .modal {
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
        background-color: rgba(0, 0, 0, 0.4);
    }
    
    .alarm-notification {
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        background-color: rgba(0, 0, 0, 0.6);
    }
    
    .sleep-timer {
        backdrop-filter: blur(4px);
        -webkit-backdrop-filter: blur(4px);
    }
    
    .modal-header,
    .modal-actions {
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
        background-color: rgba(var(--background-color-rgb), 0.8);
    }
}

/* Interactive UI element enhancements */
button, 
.btn, 
.card-interactive,
.form-control,
.nav-button,
input[type="checkbox"],
input[type="radio"],
.floating-button,
.milestone,
.theme-toggle,
.toast-close,
.modal-close,
.btn-tracked,
.btn-section {
    touch-action: manipulation;
}

/* Advanced micro-interactions */
.upcoming-item::after,
.activity-item::after,
.tracked-item::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: currentColor;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s var(--ease-in-out);
    border-radius: inherit;
}

.upcoming-item:active::after,
.activity-item:active::after,
.tracked-item:active::after {
    opacity: 0.05;
}

/* Inertia scrolling fix for iOS */
.main-container,
.modal-content,
.milestone-category-tabs,
.track-tabs {
    -webkit-overflow-scrolling: touch;
}

/* Status banner styles for app notifications */
.status-banner {
    padding: var(--space-sm) var(--space-md);
    margin-bottom: var(--space-md);
    border-radius: var(--input-radius);
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    background-color: var(--surface-color);
    border-left: 4px solid var(--primary-color);
}

.status-banner.success {
    border-left-color: var(--secondary-color);
}

.status-banner.warning {
    border-left-color: var(--accent-color);
}

.status-banner.error {
    border-left-color: var(--danger-color);
}

.status-banner-icon {
    font-size: var(--font-size-lg);
}

.status-banner-content {
    flex: 1;
}

.status-banner-title {
    font-weight: var(--font-weight-semibold);
    margin-bottom: 2px;
}

.status-banner-message {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
}

.status-banner-action {
    background: transparent;
    border: none;
    color: var(--primary-color);
    font-weight: var(--font-weight-semibold);
    cursor: pointer;
    padding: var(--space-2xs) var(--space-sm);
    border-radius: var(--border-radius-xl);
    transition: background-color var(--transition-speed-fast) var(--ease-in-out);
}

.status-banner-action:hover {
    background-color: var(--primary-transparent);
}

.status-banner-close {
    background: transparent;
    border: none;
    color: var(--text-secondary);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: var(--space-2xs);
    border-radius: 50%;
    transition: background-color var(--transition-speed-fast) var(--ease-in-out);
}

.status-banner-close:hover {
    background-color: var(--hover-overlay);
}

/* Special effects for enhanced data visualizations */
.radial-progress {
    position: relative;
    width: 80px;
    height: 80px;
}

.radial-progress-background {
    fill: none;
    stroke: var(--surface-low);
    stroke-width: 8;
}

.radial-progress-circle {
    fill: none;
    stroke-width: 8;
    stroke-linecap: round;
    transform: rotate(-90deg);
    transform-origin: center;
    transition: stroke-dashoffset 1s var(--ease-out);
}

.radial-progress-text {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: var(--font-size-md);
    font-weight: var(--font-weight-bold);
}

/* Pagination component */
.pagination {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-xs);
    margin-top: var(--space-lg);
}

.pagination-item {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background-color: transparent;
    color: var(--text-color);
    font-weight: var(--font-weight-semibold);
    cursor: pointer;
    border: none;
    transition: background-color var(--transition-speed-fast) var(--ease-in-out);
}

.pagination-item:hover {
    background-color: var(--hover-overlay);
}

.pagination-item.active {
    background-color: var(--primary-color);
    color: white;
}

.pagination-prev,
.pagination-next {
    background-color: var(--surface-color);
    border: 1px solid var(--border-color);
}

/* Enhanced contextual feedback in forms */
.form-group.has-error .input-field {
    border-color: var(--danger-color);
    background-color: var(--danger-transparent);
}

.form-group.has-error .form-label {
    color: var(--danger-color);
}

.form-error-message {
    color: var(--danger-color);
    font-size: var(--font-size-xs);
    margin-top: var(--space-2xs);
}

.form-group.has-success .input-field {
    border-color: var(--secondary-color);
}

.form-group.has-success .form-label {
    color: var(--secondary-color);
}

/* Focus within for better form navigation */
.form-group:focus-within .form-label {
    color: var(--primary-color);
}

/* Enhanced calendar styling */
.calendar {
    width: 100%;
    background-color: var(--surface-color);
    border-radius: var(--card-radius);
    overflow: hidden;
    box-shadow: var(--shadow-1);
}

.calendar-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--space-md);
    background-color: var(--primary-color);
    color: white;
}

.calendar-title {
    font-weight: var(--font-weight-semibold);
    font-size: var(--font-size-md);
}

.calendar-controls {
    display: flex;
    gap: var(--space-xs);
}

.calendar-control {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: transparent;
    border: none;
    color: white;
    cursor: pointer;
    transition: background-color var(--transition-speed-fast) var(--ease-in-out);
}

.calendar-control:hover {
    background-color: rgba(255, 255, 255, 0.2);
}

.calendar-days {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    padding: var(--space-xs);
}

.calendar-day-header {
    text-align: center;
    color: var(--text-secondary);
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-semibold);
    padding: var(--space-xs);
}

.calendar-day {
    aspect-ratio: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    border-radius: 50%;
    font-size: var(--font-size-sm);
    margin: 2px;
    position: relative;
    transition: background-color var(--transition-speed-fast) var(--ease-in-out);
}

.calendar-day:hover {
    background-color: var(--hover-overlay);
}

.calendar-day.today {
    font-weight: var(--font-weight-bold);
    border: 2px solid var(--primary-color);
}

.calendar-day.selected {
    background-color: var(--primary-color);
    color: white;
}

.calendar-day.has-events::after {
    content: '';
    position: absolute;
    bottom: 4px;
    width: 4px;
    height: 4px;
    border-radius: 50%;
    background-color: var(--primary-color);
}

.calendar-day.has-events.selected::after {
    background-color: white;
}

.calendar-day.inactive {
    color: var(--text-tertiary);
}

/* Timeline component for history */
.timeline {
    position: relative;
    padding-left: 28px;
    margin: var(--space-md) 0;
}

.timeline::before {
    content: '';
    position: absolute;
    top: 0;
    bottom: 0;
    left: 12px;
    width: 2px;
    background-color: var(--border-color);
}

.timeline-item {
    position: relative;
    margin-bottom: var(--space-md);
    animation: fadeSlideIn var(--transition-speed) var(--ease-out);
    animation-fill-mode: both;
}

.timeline-point {
    position: absolute;
    left: -28px;
    top: 0;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    background-color: var(--background-color);
    border: 2px solid var(--primary-color);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--font-size-xs);
    color: var(--primary-color);
    z-index: 1;
}

.timeline-content {
    background-color: var(--surface-color);
    border-radius: var(--input-radius);
    padding: var(--space-md);
    box-shadow: var(--shadow-1);
}

.timeline-time {
    color: var(--text-secondary);
    font-size: var(--font-size-xs);
    margin-bottom: var(--space-2xs);
}

.timeline-title {
    font-weight: var(--font-weight-semibold);
    margin-bottom: var(--space-2xs);
}

.timeline-body {
    color: var(--text-color);
    font-size: var(--font-size-sm);
}

/* Animation delay for staggered timeline items */
.timeline-item:nth-child(1) { animation-delay: 0ms; }
.timeline-item:nth-child(2) { animation-delay: 50ms; }
.timeline-item:nth-child(3) { animation-delay: 100ms; }
.timeline-item:nth-child(4) { animation-delay: 150ms; }
.timeline-item:nth-child(5) { animation-delay: 200ms; }
.timeline-item:nth-child(n+6) { animation-delay: 250ms; }

/* Keyboard navigation improvements */
*:focus-visible {
    z-index: 2;
}

/* Windows high contrast mode improvements */
@media (forced-colors: active) {
    .toggle-option.selected,
    .track-tab.active,
    .milestone.completed,
    .btn-submit,
    .btn-primary,
    .modal-btn-primary,
    .floating-button {
        forced-color-adjust: none;
    }
}

/* Loading states for buttons */
.btn-loading {
    position: relative;
    color: transparent !important;
    pointer-events: none;
}

.btn-loading::after {
    content: "";
    position: absolute;
    top: 50%;
    left: 50%;
    width: 20px;
    height: 20px;
    margin-top: -10px;
    margin-left: -10px;
    border-radius: 50%;
    border: 2px solid rgba(255, 255, 255, 0.2);
    border-top-color: white;
    animation: spin 0.8s linear infinite;
}

.btn-secondary.btn-loading::after {
    border: 2px solid rgba(0, 0, 0, 0.1);
    border-top-color: var(--text-color);
}

/* Micro-interactions for better feedback */
@keyframes success-checkmark {
    0% {
        transform: scale(0);
    }
    50% {
        transform: scale(1.2);
    }
    100% {
        transform: scale(1);
    }
}

.success-animation {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    color: var(--secondary-color);
    animation: success-checkmark 0.5s var(--ease-bounce);
}

/* Final tweaks and overrides */
.text-truncate {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 100%;
}

/* Additional helper classes for specific use cases */
.width-auto { width: auto !important; }
.width-full { width: 100% !important; }
.height-auto { height: auto !important; }
.height-full { height: 100% !important; }

.d-none { display: none !important; }
.d-block { display: block !important; }
.d-flex { display: flex !important; }
.d-inline { display: inline !important; }
.d-inline-block { display: inline-block !important; }
.d-inline-flex { display: inline-flex !important; }

.position-relative { position: relative !important; }
.position-absolute { position: absolute !important; }
.position-fixed { position: fixed !important; }
.position-sticky { position: sticky !important; }

.top-0 { top: 0 !important; }
.right-0 { right: 0 !important; }
.bottom-0 { bottom: 0 !important; }
.left-0 { left: 0 !important; }

.z-0 { z-index: 0 !important; }
.z-10 { z-index: 10 !important; }
.z-20 { z-index: 20 !important; }
.z-30 { z-index: 30 !important; }
.z-40 { z-index: 40 !important; }
.z-50 { z-index: 50 !important; }
.z-auto { z-index: auto !important; }

/* End of stylesheet */